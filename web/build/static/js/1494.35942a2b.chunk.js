"use strict";(self.webpackChunknext_terminal=self.webpackChunknext_terminal||[]).push([[1494],{16018:(e,t,a)=>{a.d(t,{A:()=>c});var n=a(93766),s=a(21215),i=a.n(s);class c{constructor(e){this.group="",this.getById=async e=>{let t=await n.A.get("/".concat(this.group,"/").concat(e));if(1===t.code)return t.data},this.getPaging=async e=>{let t=i().stringify(e),a=await n.A.get("/".concat(this.group,"/paging?").concat(t));return 1!==a.code?{}:a.data},this.getAll=async()=>{let e=await n.A.get("/".concat(this.group));return 1!==e.code?[]:e.data},this.create=async e=>1===(await n.A.post("/".concat(this.group),e)).code,this.updateById=async(e,t)=>1===(await n.A.put("/".concat(this.group,"/").concat(e),t)).code,this.deleteById=async e=>1===(await n.A.delete("/".concat(this.group,"/").concat(e))).code,this.group=e}}},53343:(e,t,a)=>{a.d(t,{A:()=>c});var n=a(16018),s=a(93766);class i extends n.A{constructor(){super("commands"),this.changeOwner=async(e,t)=>1===(await s.A.post("/".concat(this.group,"/").concat(e,"/change-owner?owner=").concat(t))).code}}const c=new i},50544:(e,t,a)=>{a.d(t,{A:()=>i});var n=a(16018);class s extends n.A{constructor(){super("worker/commands")}}const i=new s},73175:(e,t,a)=>{a.d(t,{A:()=>h});var n=a(9950),s=a(55902),i=a(87827),c=a(87427),r=a(53343),d=a(50544),o=a(44414);const l=r.A,{TextArea:u}=s.A,h=e=>{let{visible:t,handleOk:a,handleCancel:r,confirmLoading:h,id:g,worker:p}=e;const[y]=i.A.useForm();return(0,n.useEffect)((()=>{t?g?(async()=>{let e;e=!0===p?await d.A.getById(g):await l.getById(g),e&&y.setFieldsValue(e)})():y.setFieldsValue({}):y.resetFields()}),[t]),(0,o.jsx)(c.A,{title:g?"\u66f4\u65b0\u52a8\u6001\u6307\u4ee4":"\u65b0\u5efa\u52a8\u6001\u6307\u4ee4",visible:t,maskClosable:!1,destroyOnClose:!0,onOk:()=>{y.validateFields().then((async e=>{await a(e)&&y.resetFields()}))},onCancel:()=>{y.resetFields(),r()},confirmLoading:h,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",children:(0,o.jsxs)(i.A,{form:y,labelCol:{span:6},wrapperCol:{span:14},children:[(0,o.jsx)(i.A.Item,{name:"id",noStyle:!0,children:(0,o.jsx)(s.A,{hidden:!0})}),(0,o.jsx)(i.A.Item,{label:"\u6307\u4ee4\u540d\u79f0",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6307\u4ee4\u540d\u79f0"}],children:(0,o.jsx)(s.A,{placeholder:"\u8bf7\u8f93\u5165\u6307\u4ee4\u540d\u79f0"})}),(0,o.jsx)(i.A.Item,{label:"\u6307\u4ee4\u5185\u5bb9",name:"content",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6307\u4ee4\u5185\u5bb9"}],children:(0,o.jsx)(u,{autoSize:{minRows:5,maxRows:10},placeholder:"\u4e00\u884c\u4e00\u4e2a\u6307\u4ee4"})})]})})}},91494:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var n=a(9950),s=a(56231),i=a(48538),c=a(27666),r=a(73175),d=a(50544),o=a(44414);const l=d.A,u=n.createRef(),h=()=>{let[e,t]=(0,n.useState)(!1),[a,d]=(0,n.useState)(!1),[h,g]=(0,n.useState)(void 0);const p=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u540d\u79f0",dataIndex:"name"},{title:"\u5185\u5bb9",dataIndex:"content",key:"content",copyable:!0,ellipsis:!0},{title:"\u521b\u5efa\u65f6\u95f4",key:"created",dataIndex:"created",hideInSearch:!0},{title:"\u64cd\u4f5c",valueType:"option",key:"option",render:(e,a,n,i)=>[(0,o.jsx)("a",{onClick:()=>{t(!0),g(a.id)},children:"\u7f16\u8f91"},"edit"),(0,o.jsx)(s.A,{title:"\u60a8\u786e\u8ba4\u8981\u5220\u9664\u6b64\u884c\u5417?",onConfirm:async()=>{await l.deleteById(a.id),u.current.reload()},okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",children:(0,o.jsx)("a",{className:"danger",children:"\u5220\u9664"},"delete")},"confirm-delete")]}];return(0,o.jsxs)("div",{children:[(0,o.jsx)(c.A,{columns:p,actionRef:u,request:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a="",n="";Object.keys(t).length>0&&(a=Object.keys(t)[0],n=Object.values(t)[0]);let s={pageIndex:e.current,pageSize:e.pageSize,name:e.name,field:a,order:n},i=await l.getPaging(s);return{data:i.items,success:!0,total:i.total}},rowKey:"id",search:{labelWidth:"auto"},pagination:{defaultPageSize:10},dateFormatter:"string",headerTitle:"\u6307\u4ee4\u5217\u8868",toolBarRender:()=>[(0,o.jsx)(i.A,{type:"primary",onClick:()=>{t(!0)},children:"\u65b0\u5efa"},"button")]}),(0,o.jsx)(r.A,{id:h,worker:!0,visible:e,confirmLoading:a,handleCancel:()=>{t(!1),g(void 0)},handleOk:async e=>{d(!0);try{let a;a=e.id?await l.updateById(e.id,e):await l.create(e),a&&t(!1),u.current.reload()}finally{d(!1)}}})]})}}}]);