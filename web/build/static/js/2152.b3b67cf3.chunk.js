"use strict";(self.webpackChunknext_terminal=self.webpackChunknext_terminal||[]).push([[2152],{16018:(e,t,s)=>{s.d(t,{A:()=>r});var a=s(93766),l=s(21215),n=s.n(l);class r{constructor(e){this.group="",this.getById=async e=>{let t=await a.A.get("/".concat(this.group,"/").concat(e));if(1===t.code)return t.data},this.getPaging=async e=>{let t=n().stringify(e),s=await a.A.get("/".concat(this.group,"/paging?").concat(t));return 1!==s.code?{}:s.data},this.getAll=async()=>{let e=await a.A.get("/".concat(this.group));return 1!==e.code?[]:e.data},this.create=async e=>1===(await a.A.post("/".concat(this.group),e)).code,this.updateById=async(e,t)=>1===(await a.A.put("/".concat(this.group,"/").concat(e),t)).code,this.deleteById=async e=>1===(await a.A.delete("/".concat(this.group,"/").concat(e))).code,this.group=e}}},80398:(e,t,s)=>{s.d(t,{A:()=>r});var a=s(16018),l=s(93766);class n extends a.A{constructor(){var e;super("assets"),e=this,this.GetAll=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=await l.A.get("/".concat(e.group,"?protocol=").concat(t));return 1!==s.code?[]:s.data},this.connTest=async e=>{let t=await l.A.post("/".concat(this.group,"/").concat(e,"/tcping"));return 1!==t.code?[!1,t.message]:[t.data.active,t.data.message]},this.importAsset=async e=>{const t=new FormData;t.append("file",e);let s=await l.A.post("/".concat(this.group,"/import"),t,{"Content-Type":"multipart/form-data"});return 1!==s.code?[!1,s.message]:[!0,s.data]},this.changeOwner=async(e,t)=>1===(await l.A.post("/".concat(this.group,"/").concat(e,"/change-owner?owner=").concat(t))).code}}const r=new n},36381:(e,t,s)=>{s.d(t,{A:()=>r});var a=s(16018),l=s(93766);class n extends a.A{constructor(){super("credentials"),this.getAll=async()=>{let e=await l.A.get("/".concat(this.group));return 1!==e.code?[]:e.data}}}const r=new n},58706:(e,t,s)=>{s.d(t,{A:()=>l});var a=s(93766);const l=new class{constructor(){this.getAll=async()=>{let e=await a.A.get("/tags");return 1!==e.code?[]:e.data}}}},16623:(e,t,s)=>{s.d(t,{A:()=>r});var a=s(16018),l=s(93766);class n extends a.A{constructor(){super("users"),this.resetTotp=async e=>1===(await l.A.post("/".concat(this.group,"/").concat(e,"/reset-totp"))).code,this.changePassword=async(e,t)=>{let s=new FormData;return s.set("password",t),1===(await l.A.post("/".concat(this.group,"/").concat(e,"/change-password"),s)).code},this.changeStatus=async(e,t)=>1!==(await l.A.patch("/".concat(this.group,"/").concat(e,"/status?status=").concat(t))).code}}const r=new n},75602:(e,t,s)=>{s.d(t,{K:()=>a});const a={rdp:"cyan",ssh:"blue",telnet:"geekblue",vnc:"purple",kubernetes:"volcano"}},2152:(e,t,s)=>{s.r(t),s.d(t,{default:()=>ae});var a=s(9950),l=s(68832),n=s(12916),r=s(99674),c=s(52735),i=s(74947),d=s(56231),o=s(1158),h=s(84703),u=s(48538),x=s(65059),p=s(94064),m=s(87427),j=s(28429),A=s(42074),g=s(43151),v=s(27666),y=s(80398),b=s(58706),I=s(75602),k=s(98409),w=s(55902),C=s(50559),f=s(15089),S=s(87827),O=s(17811),T=s(6579),N=s(43637),E=s(72381),F=s(93766),P=s(36381),R=s(52998),L=s(9583),V=s(22137),_=s(44414);const{TextArea:D}=w.A,{Option:G}=r.A,{Text:K}=C.A,{Panel:U}=f.A,q={ssh:[{text:"\u5bc6\u7801",value:"custom"},{text:"\u5bc6\u94a5",value:"private-key"},{text:"\u6388\u6743\u51ed\u8bc1",value:"credential"}],rdp:[{text:"\u5bc6\u7801",value:"custom"},{text:"\u6388\u6743\u51ed\u8bc1",value:"credential"}],vnc:[{text:"\u5bc6\u7801",value:"custom"},{text:"\u6388\u6743\u51ed\u8bc1",value:"credential"}],telnet:[{text:"\u5bc6\u7801",value:"custom"},{text:"\u6388\u6743\u51ed\u8bc1",value:"credential"}]},B={labelCol:{span:6},wrapperCol:{span:16}},M={labelCol:{span:6},wrapperCol:{span:14}},z=function(e){let{visible:t,handleOk:s,handleCancel:l,confirmLoading:n,id:i,copied:d}=e;const[o]=S.A.useForm();let[h,u]=(0,a.useState)("custom"),[x,p]=(0,a.useState)("rdp"),[j,A]=(0,a.useState)(q.rdp),[g,v]=(0,a.useState)(!1),[I,C]=(0,a.useState)([]),[z,H]=(0,a.useState)(!1),[Y,W]=(0,a.useState)(!1),[J,Q]=(0,a.useState)([]),[Z,X]=(0,a.useState)([]),[$,ee]=(0,a.useState)([]);(0,a.useEffect)((()=>{t?(i&&(async()=>{let e=await y.A.getById(i);if(e){e["use-ssl"]="true"===e["use-ssl"],e["ignore-cert"]="true"===e["ignore-cert"],e["enable-drive"]="true"===e["enable-drive"],e["socks-proxy-enable"]="true"===e["socks-proxy-enable"],e["force-lossless"]="true"===e["force-lossless"];for(let t in e)e.hasOwnProperty(t)&&"-"===e[t]&&(e[t]="");k.A.hasText(e.tags)?e.tags=e.tags.split(","):e.tags=[],u(e.accountType),"credential"===e.accountType&&te(),A(q[e.protocol]),p(e.protocol),v(e["use-ssl"]),H(e["enable-drive"]),W(e["socks-proxy-enable"]),o.setFieldsValue(e)}})(),(async()=>{let e=await b.A.getAll();X(e)})(),(async()=>{const e=await F.A.get("/access-gateways");1===e.code&&Q(e.data)})()):o.setFieldsValue({accountType:h,protocol:x,port:3389,"enable-drive":!1,"force-lossless":!1,"socks-proxy-enable":!1,"ignore-cert":!1,"use-ssl":!1})}),[t]);const te=async()=>{let e=await P.A.getAll();ee(e)},se=e=>{u(e),"credential"===e&&te()},ae=(0,_.jsxs)("div",{className:"basic",style:{marginTop:16},children:[(0,_.jsx)(S.A.Item,{label:"\u8d44\u4ea7\u540d\u79f0",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d44\u4ea7\u540d\u79f0"}],children:(0,_.jsx)(w.A,{placeholder:"\u8d44\u4ea7\u540d\u79f0"})}),(0,_.jsx)(S.A.Item,{label:"\u534f\u8bae",name:"protocol",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u63a5\u5165\u534f\u8bae"}],children:(0,_.jsxs)(O.Ay.Group,{onChange:e=>{let t;switch(p(e.target.value),e.target.value){case"ssh":t=22,A(q.ssh),o.setFieldsValue({accountType:"custom"}),se("custom");break;case"rdp":t=3389,A(q.rdp),o.setFieldsValue({accountType:"custom"}),se("custom");break;case"vnc":t=5900,A(q.vnc),o.setFieldsValue({accountType:"custom"}),se("custom");break;case"telnet":t=23,A(q.telnet),o.setFieldsValue({accountType:"custom"}),se("custom");break;case"kubernetes":t=6443;break;default:t=65535}o.setFieldsValue({port:t})},children:[(0,_.jsx)(O.Ay,{value:"rdp",children:"RDP"}),(0,_.jsx)(O.Ay,{value:"ssh",children:"SSH"}),(0,_.jsx)(O.Ay,{value:"vnc",children:"VNC"}),(0,_.jsx)(O.Ay,{value:"telnet",children:"Telnet"}),(0,_.jsx)(O.Ay,{value:"kubernetes",children:"Kubernetes"})]})}),(0,_.jsx)(S.A.Item,{label:"\u4e3b\u673a\u5730\u5740",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d44\u4ea7\u7684\u4e3b\u673a\u540d\u79f0\u548cIP\u5730\u5740"}],children:(0,_.jsxs)(w.A.Group,{compact:!0,children:[(0,_.jsx)(S.A.Item,{noStyle:!0,name:"ip",children:(0,_.jsx)(w.A,{style:{width:"80%"},placeholder:"\u8d44\u4ea7\u7684\u4e3b\u673a\u540d\u79f0\u6216\u8005IP\u5730\u5740"})}),(0,_.jsx)(S.A.Item,{noStyle:!0,name:"port",children:(0,_.jsx)(T.A,{style:{width:"20%"},min:1,max:65535,placeholder:"TCP\u7aef\u53e3"})})]})}),"kubernetes"===x?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(S.A.Item,{name:"namespace",label:"\u547d\u540d\u7a7a\u95f4",children:(0,_.jsx)(w.A,{type:"text",placeholder:"\u4e3a\u7a7a\u65f6\u9ed8\u8ba4\u4f7f\u7528default\u547d\u540d\u7a7a\u95f4"})}),(0,_.jsx)(S.A.Item,{name:"pod",label:"pod",rules:[{required:!0,message:"\u8bf7\u8f93\u5165Pod\u540d\u79f0"}],children:(0,_.jsx)(w.A,{type:"text",placeholder:"Kubernetes Pod\u7684\u540d\u79f0\uff0c\u5176\u4e2d\u5305\u542b\u4e0e\u4e4b\u76f8\u8fde\u7684\u5bb9\u5668\u3002"})}),(0,_.jsx)(S.A.Item,{name:"container",label:"\u5bb9\u5668",children:(0,_.jsx)(w.A,{type:"text",placeholder:"\u4e3a\u7a7a\u65f6\u9ed8\u8ba4\u4f7f\u7528\u7b2c\u4e00\u4e2a\u5bb9\u5668"})})]}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(S.A.Item,{label:"\u8d26\u6237\u7c7b\u578b",name:"accountType",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u63a5\u8d26\u6237\u7c7b\u578b"}],children:(0,_.jsx)(r.A,{onChange:se,children:j.map((e=>(0,_.jsx)(G,{value:e.value,children:e.text},e.value)))})}),"credential"===h?(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(S.A.Item,{label:"\u6388\u6743\u51ed\u8bc1",name:"credentialId",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6388\u6743\u51ed\u8bc1"}],children:(0,_.jsx)(r.A,{onChange:()=>null,children:$.map((e=>(0,_.jsx)(G,{value:e.id,children:(0,_.jsx)(c.A,{placement:"topLeft",title:e.name,children:e.name})},e.id)))})})}):null,"custom"===h?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("input",{type:"password",hidden:!0,autoComplete:"new-password"}),(0,_.jsx)(S.A.Item,{label:"\u6388\u6743\u8d26\u6237",name:"username",children:(0,_.jsx)(w.A,{autoComplete:"off",placeholder:"\u8f93\u5165\u6388\u6743\u8d26\u6237"})}),(0,_.jsx)(S.A.Item,{label:"\u6388\u6743\u5bc6\u7801",name:"password",children:(0,_.jsx)(w.A.Password,{autoComplete:"off",placeholder:"\u8f93\u5165\u6388\u6743\u5bc6\u7801"})})]}):null,"private-key"===h?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(S.A.Item,{label:"\u6388\u6743\u8d26\u6237",name:"username",children:(0,_.jsx)(w.A,{placeholder:"\u8f93\u5165\u6388\u6743\u8d26\u6237"})}),(0,_.jsx)(S.A.Item,{label:"\u79c1\u94a5",name:"privateKey",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u79c1\u94a5"}],children:(0,_.jsx)(D,{rows:4})}),(0,_.jsx)(S.A.Item,{label:"\u79c1\u94a5\u5bc6\u7801",name:"passphrase",children:(0,_.jsx)(D,{rows:1})})]}):null]}),(0,_.jsx)(S.A.Item,{label:"\u63a5\u5165\u7f51\u5173",name:"accessGatewayId",tooltip:"\u9700\u8981\u4ece\u63a5\u5165\u7f51\u5173\u624d\u80fd\u8bbf\u95ee\u7684\u76ee\u6807\u673a\u5668\u5fc5\u9009",children:(0,_.jsx)(r.A,{onChange:()=>null,allowClear:!0,children:J.map((e=>(0,_.jsx)(G,{value:e.id,placeholder:"\u9700\u8981\u4ece\u63a5\u5165\u7f51\u5173\u624d\u80fd\u8bbf\u95ee\u7684\u76ee\u6807\u673a\u5668\u5fc5\u9009",children:(0,_.jsx)(c.A,{placement:"topLeft",title:e.name,children:e.name})},e.id)))})}),(0,_.jsx)(S.A.Item,{label:"\u6807\u7b7e",name:"tags",children:(0,_.jsx)(r.A,{mode:"tags",placeholder:"\u6807\u7b7e\u53ef\u4ee5\u66f4\u52a0\u65b9\u4fbf\u7684\u68c0\u7d22\u8d44\u4ea7",children:Z.map((e=>{if("-"!==e)return(0,_.jsx)(G,{children:e},e)}))})}),(0,_.jsx)(S.A.Item,{label:"\u5907\u6ce8",name:"description",children:(0,_.jsx)(D,{rows:4,placeholder:"\u5173\u4e8e\u8d44\u4ea7\u7684\u4e00\u4e9b\u4fe1\u606f\u60a8\u53ef\u4ee5\u5199\u5728\u8fd9\u91cc"})})]}),le=(0,_.jsx)("div",{className:"advanced",children:(0,_.jsxs)(f.A,{defaultActiveKey:["VNC\u4e2d\u7ee7","storage","\u6a21\u5f0f\u8bbe\u7f6e","\u663e\u793a\u8bbe\u7f6e","\u63a7\u5236\u7ec8\u7aef\u884c\u4e3a","socks"],ghost:!0,children:["rdp"===x?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(U,{header:(0,_.jsx)(K,{strong:!0,children:"\u663e\u793a\u8bbe\u7f6e"}),children:[(0,_.jsx)(S.A.Item,{name:"color-depth",label:"\u8272\u5f69\u6df1\u5ea6",initialValue:"",children:(0,_.jsxs)(r.A,{onChange:null,children:[(0,_.jsx)(G,{value:"",children:"\u9ed8\u8ba4"}),(0,_.jsx)(G,{value:"16",children:"\u4f4e\u8272\uff0816\u4f4d\uff09"}),(0,_.jsx)(G,{value:"24",children:"\u771f\u5f69\uff0824\u4f4d\uff09"}),(0,_.jsx)(G,{value:"32",children:"\u771f\u5f69\uff0832\u4f4d\uff09"}),(0,_.jsx)(G,{value:"8",children:"256\u8272"})]})}),(0,_.jsx)(S.A.Item,{name:"force-lossless",label:"\u65e0\u635f\u538b\u7f29",valuePropName:"checked",rules:[{required:!0}],children:(0,_.jsx)(N.A,{checkedChildren:"\u5f00\u542f",unCheckedChildren:"\u5173\u95ed"})})]},"\u663e\u793a\u8bbe\u7f6e"),(0,_.jsx)(U,{header:(0,_.jsx)(K,{strong:!0,children:"\u8ba4\u8bc1"}),children:(0,_.jsx)(S.A.Item,{name:"domain",label:"\u57df",children:(0,_.jsx)(w.A,{type:"text",placeholder:"\u8eab\u4efd\u9a8c\u8bc1\u65f6\u4f7f\u7528\u7684\u57df"})})},"\u8ba4\u8bc1"),(0,_.jsxs)(U,{header:(0,_.jsx)(K,{strong:!0,children:"\u9884\u8fde\u63a5 PDU (Hyper-V / VMConnect)"}),children:[(0,_.jsx)(S.A.Item,{name:"preconnection-id",label:"\u9884\u8fde\u63a5ID",children:(0,_.jsx)(w.A,{type:"text",placeholder:"RDP \u6e90\u7684\u6570\u5b57 ID"})}),(0,_.jsx)(S.A.Item,{name:"preconnection-blob",label:"\u9884\u8fde\u63a5\u5b57\u7b26",children:(0,_.jsx)(w.A,{type:"text",placeholder:"\u6807\u8bc6 RDP \u6e90\u7684\u4efb\u610f\u5b57\u7b26\u4e32"})})]},"PDU"),(0,_.jsxs)(U,{header:(0,_.jsx)(K,{strong:!0,children:"Remote App"}),children:[(0,_.jsx)(S.A.Item,{name:"remote-app",label:"\u7a0b\u5e8f",tooltip:"\u6307\u5b9a\u5728\u8fdc\u7a0b\u684c\u9762\u4e0a\u542f\u52a8\u7684RemoteApp\u3002\r\n\u5982\u679c\u60a8\u7684\u8fdc\u7a0b\u684c\u9762\u670d\u52a1\u5668\u652f\u6301\u8be5\u5e94\u7528\u7a0b\u5e8f\uff0c\u5219\u8be5\u5e94\u7528\u7a0b\u5e8f(\u4e14\u4ec5\u8be5\u5e94\u7528\u7a0b\u5e8f)\u5bf9\u7528\u6237\u53ef\u89c1\u3002\r Windows\u9700\u8981\u5bf9\u8fdc\u7a0b\u5e94\u7528\u7a0b\u5e8f\u7684\u540d\u79f0\u4f7f\u7528\u7279\u6b8a\u7684\u7b26\u53f7\u3002\r\n\u8fdc\u7a0b\u5e94\u7528\u7a0b\u5e8f\u7684\u540d\u79f0\u5fc5\u987b\u4ee5\u4e24\u4e2a\u7ad6\u6761\u4f5c\u4e3a\u524d\u7f00\u3002\r\n\u4f8b\u5982\uff0c\u5982\u679c\u60a8\u5df2\u7ecf\u5728\u60a8\u7684\u670d\u52a1\u5668\u4e0a\u4e3anotepad.exe\u521b\u5efa\u4e86\u4e00\u4e2a\u8fdc\u7a0b\u5e94\u7528\u7a0b\u5e8f\uff0c\u5e76\u5c06\u5176\u547d\u540d\u4e3a\u201cnotepad\u201d\uff0c\u5219\u60a8\u5c06\u8be5\u53c2\u6570\u8bbe\u7f6e\u4e3a:\u201c||notepad\u201d\u3002",children:(0,_.jsx)(w.A,{type:"text",placeholder:"remote app"})}),(0,_.jsx)(S.A.Item,{name:"remote-app-dir",label:"\u5de5\u4f5c\u76ee\u5f55",tooltip:"remote app\u7684\u5de5\u4f5c\u76ee\u5f55\uff0c\u5982\u679c\u672a\u914d\u7f6eremote app\uff0c\u6b64\u53c2\u6570\u65e0\u6548\u3002",children:(0,_.jsx)(w.A,{type:"text",placeholder:"remote app\u7684\u5de5\u4f5c\u76ee\u5f55"})}),(0,_.jsx)(S.A.Item,{name:"remote-app-args",label:"\u53c2\u6570",tooltip:"remote app\u7684\u547d\u4ee4\u884c\u53c2\u6570\uff0c\u5982\u679c\u672a\u914d\u7f6eremote app\uff0c\u6b64\u53c2\u6570\u65e0\u6548\u3002",children:(0,_.jsx)(w.A,{type:"text",placeholder:"remote app\u7684\u547d\u4ee4\u884c\u53c2\u6570"})})]},"remote-app"),(0,_.jsxs)(U,{header:(0,_.jsx)(K,{strong:!0,children:"\u6620\u5c04\u7f51\u7edc\u9a71\u52a8\u5668"}),children:[(0,_.jsx)(S.A.Item,{name:"enable-drive",label:"\u542f\u7528",valuePropName:"checked",children:(0,_.jsx)(N.A,{checkedChildren:"\u5f00\u542f",unCheckedChildren:"\u5173\u95ed",onChange:async(e,t)=>{H(e),!0===e&&(async()=>{const e=await F.A.get("/storages/shares");1===e.code&&C(e.data)})()}})}),z?(0,_.jsx)(S.A.Item,{name:"drive-path",label:"\u6620\u5c04\u7a7a\u95f4",extra:"\u7528\u4e8e\u6587\u4ef6\u4f20\u8f93\u7684\u6620\u5c04\u7f51\u7edc\u9a71\u52a8\u5668\uff0c\u4e3a\u7a7a\u65f6\u4f7f\u7528\u64cd\u4f5c\u4eba\u7684\u9ed8\u8ba4\u7a7a\u95f4",children:(0,_.jsx)(r.A,{onChange:null,allowClear:!0,placeholder:"\u4e3a\u7a7a\u65f6\u4f7f\u7528\u64cd\u4f5c\u4eba\u7684\u9ed8\u8ba4\u7a7a\u95f4",children:I.map((e=>(0,_.jsx)(G,{value:e.id,children:e.name})))})}):void 0]},"storage")]}):void 0,"ssh"===x?(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)(U,{header:(0,_.jsx)(K,{strong:!0,children:"Socks \u4ee3\u7406"}),children:[(0,_.jsx)(S.A.Item,{name:"ssh-mode",noStyle:!0,children:(0,_.jsx)(w.A,{hidden:!0,value:"native"})}),(0,_.jsx)(S.A.Item,{name:"socks-proxy-enable",label:"\u4f7f\u7528Socks\u4ee3\u7406",valuePropName:"checked",children:(0,_.jsx)(N.A,{checkedChildren:"\u662f",unCheckedChildren:"\u5426",onChange:(e,t)=>{W(e)}})}),Y?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(S.A.Item,{label:"\u4ee3\u7406\u5730\u5740",name:"socks-proxy-host",rules:[{required:!0}],children:(0,_.jsx)(w.A,{placeholder:"Socks \u4ee3\u7406\u7684\u4e3b\u673a\u5730\u5740"})}),(0,_.jsx)(S.A.Item,{label:"\u4ee3\u7406\u7aef\u53e3",name:"socks-proxy-port",rules:[{required:!0}],children:(0,_.jsx)(T.A,{min:1,max:65535,placeholder:"Socks \u4ee3\u7406\u7684\u4e3b\u673a\u7aef\u53e3"})}),(0,_.jsx)("input",{type:"password",hidden:!0,autoComplete:"new-password"}),(0,_.jsx)(S.A.Item,{label:"\u4ee3\u7406\u8d26\u53f7",name:"socks-proxy-username",children:(0,_.jsx)(w.A,{autoComplete:"off",placeholder:"\u4ee3\u7406\u8d26\u53f7\uff0c\u6ca1\u6709\u53ef\u4ee5\u4e0d\u586b"})}),(0,_.jsx)(S.A.Item,{label:"\u4ee3\u7406\u5bc6\u7801",name:"socks-proxy-password",children:(0,_.jsx)(w.A.Password,{autoComplete:"off",placeholder:"\u4ee3\u7406\u5bc6\u7801\uff0c\u6ca1\u6709\u53ef\u4ee5\u4e0d\u586b"})})]}):void 0]},"socks")}):void 0,"vnc"===x?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(U,{header:(0,_.jsx)(K,{strong:!0,children:"\u663e\u793a\u8bbe\u7f6e"}),children:[(0,_.jsx)(S.A.Item,{name:"color-depth",label:"\u8272\u5f69\u6df1\u5ea6",initialValue:"",children:(0,_.jsxs)(r.A,{onChange:null,children:[(0,_.jsx)(G,{value:"",children:"\u9ed8\u8ba4"}),(0,_.jsx)(G,{value:"16",children:"\u4f4e\u8272\uff0816\u4f4d\uff09"}),(0,_.jsx)(G,{value:"24",children:"\u771f\u5f69\uff0824\u4f4d\uff09"}),(0,_.jsx)(G,{value:"32",children:"\u771f\u5f69\uff0832\u4f4d\uff09"}),(0,_.jsx)(G,{value:"8",children:"256\u8272"})]})}),(0,_.jsx)(S.A.Item,{name:"cursor",label:"\u5149\u6807",initialValue:"",children:(0,_.jsxs)(r.A,{onChange:null,children:[(0,_.jsx)(G,{value:"",children:"\u9ed8\u8ba4"}),(0,_.jsx)(G,{value:"local",children:"\u672c\u5730"}),(0,_.jsx)(G,{value:"remote",children:"\u8fdc\u7a0b"})]})})]},"\u663e\u793a\u8bbe\u7f6e"),(0,_.jsxs)(U,{header:(0,_.jsx)(K,{strong:!0,children:"VNC\u4e2d\u7ee7"}),children:[(0,_.jsx)(S.A.Item,{label:"\u76ee\u6807\u4e3b\u673a",tooltip:"\u8fde\u63a5\u5230VNC\u4ee3\u7406\uff08\u4f8b\u5982UltraVNC Repeater\uff09\u65f6\u8981\u8bf7\u6c42\u7684\u76ee\u6807\u4e3b\u673a\u3002",name:"dest-host",children:(0,_.jsx)(w.A,{placeholder:"\u76ee\u6807\u4e3b\u673a"})}),(0,_.jsx)(S.A.Item,{label:"\u76ee\u6807\u7aef\u53e3",tooltip:"\u8fde\u63a5\u5230VNC\u4ee3\u7406\uff08\u4f8b\u5982UltraVNC Repeater\uff09\u65f6\u8981\u8bf7\u6c42\u7684\u76ee\u6807\u7aef\u53e3\u3002",name:"dest-port",children:(0,_.jsx)(w.A,{type:"number",min:1,max:65535,placeholder:"\u76ee\u6807\u7aef\u53e3"})})]},"VNC\u4e2d\u7ee7")]}):void 0,"telnet"===x?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(U,{header:(0,_.jsx)(K,{strong:!0,children:"\u8ba4\u8bc1"}),children:[(0,_.jsx)(S.A.Item,{...M,name:"username-regex",label:"\u7528\u6237\u540d\u6b63\u5219\u8868\u8fbe\u5f0f",children:(0,_.jsx)(w.A,{type:"text",placeholder:""})}),(0,_.jsx)(S.A.Item,{...M,name:"password-regex",label:"\u5bc6\u7801\u6b63\u5219\u8868\u8fbe\u5f0f",children:(0,_.jsx)(w.A,{type:"text",placeholder:""})}),(0,_.jsx)(S.A.Item,{...M,name:"login-success-regex",label:"\u767b\u5f55\u6210\u529f\u6b63\u5219\u8868\u8fbe\u5f0f",children:(0,_.jsx)(w.A,{type:"text",placeholder:""})}),(0,_.jsx)(S.A.Item,{...M,name:"login-failure-regex",label:"\u767b\u5f55\u5931\u8d25\u6b63\u5219\u8868\u8fbe\u5f0f",children:(0,_.jsx)(w.A,{type:"text",placeholder:""})})]},"\u8ba4\u8bc1"),(0,_.jsxs)(U,{header:(0,_.jsx)(K,{strong:!0,children:"\u663e\u793a\u8bbe\u7f6e"}),children:[(0,_.jsx)(S.A.Item,{name:"color-scheme",label:"\u914d\u8272\u65b9\u6848",initialValue:"",children:(0,_.jsxs)(r.A,{onChange:null,children:[(0,_.jsx)(G,{value:"",children:"\u9ed8\u8ba4"}),(0,_.jsx)(G,{value:"gray-black",children:"\u9ed1\u5e95\u7070\u5b57"}),(0,_.jsx)(G,{value:"green-black",children:"\u9ed1\u5e95\u7eff\u5b57"}),(0,_.jsx)(G,{value:"white-black",children:"\u9ed1\u5e95\u767d\u5b57"}),(0,_.jsx)(G,{value:"black-white",children:"\u767d\u5e95\u9ed1\u5b57"})]})}),(0,_.jsx)(S.A.Item,{name:"font-name",label:"\u5b57\u4f53\u540d\u79f0",children:(0,_.jsx)(w.A,{type:"text",placeholder:"\u4e3a\u7a7a\u65f6\u4f7f\u7528\u7cfb\u7edf\u9ed8\u8ba4\u5b57\u4f53"})}),(0,_.jsx)(S.A.Item,{name:"font-size",label:"\u5b57\u4f53\u5927\u5c0f",children:(0,_.jsx)(w.A,{type:"number",placeholder:"\u4e3a\u7a7a\u65f6\u4f7f\u7528\u7cfb\u7edf\u9ed8\u8ba4\u5b57\u4f53\u5927\u5c0f",min:8,max:96})})]},"\u663e\u793a\u8bbe\u7f6e"),(0,_.jsxs)(U,{header:(0,_.jsx)(K,{strong:!0,children:"\u63a7\u5236\u7ec8\u7aef\u884c\u4e3a"}),children:[(0,_.jsx)(S.A.Item,{name:"backspace",label:"\u9000\u683c\u952e\u6620\u5c04",initialValue:"",children:(0,_.jsxs)(r.A,{onChange:null,children:[(0,_.jsx)(G,{value:"",children:"\u9ed8\u8ba4"}),(0,_.jsx)(G,{value:"127",children:"\u5220\u9664\u952e(Ctrl-?)"}),(0,_.jsx)(G,{value:"8",children:"\u9000\u683c\u952e(Ctrl-H)"})]})}),(0,_.jsx)(S.A.Item,{name:"terminal-type",label:"\u7ec8\u7aef\u7c7b\u578b",initialValue:"",children:(0,_.jsxs)(r.A,{onChange:null,children:[(0,_.jsx)(G,{value:"",children:"\u9ed8\u8ba4"}),(0,_.jsx)(G,{value:"ansi",children:"ansi"}),(0,_.jsx)(G,{value:"linux",children:"linux"}),(0,_.jsx)(G,{value:"vt100",children:"vt100"}),(0,_.jsx)(G,{value:"vt220",children:"vt220"}),(0,_.jsx)(G,{value:"xterm",children:"xterm"}),(0,_.jsx)(G,{value:"xterm-256color",children:"xterm-256color"})]})})]},"\u63a7\u5236\u7ec8\u7aef\u884c\u4e3a")]}):void 0,"kubernetes"===x?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(U,{header:(0,_.jsx)(K,{strong:!0,children:"\u8ba4\u8bc1"}),children:[(0,_.jsx)(S.A.Item,{name:"use-ssl",label:"\u4f7f\u7528SSL",valuePropName:"checked",children:(0,_.jsx)(N.A,{checkedChildren:"\u662f",unCheckedChildren:"\u5426",onChange:(e,t)=>{v(e)}})}),g?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(S.A.Item,{name:"client-cert",label:"client-cert",children:(0,_.jsx)(w.A,{type:"text",placeholder:""})}),(0,_.jsx)(S.A.Item,{name:"client-key",label:"client-key",children:(0,_.jsx)(w.A,{type:"text",placeholder:""})}),(0,_.jsx)(S.A.Item,{name:"ca-cert",label:"ca-cert",children:(0,_.jsx)(w.A,{type:"text",placeholder:""})})]}):void 0,(0,_.jsx)(S.A.Item,{name:"ignore-cert",label:"\u5ffd\u7565\u8bc1\u4e66",valuePropName:"checked",children:(0,_.jsx)(N.A,{checkedChildren:"\u662f",unCheckedChildren:"\u5426",onChange:(e,t)=>{}})})]},"\u8ba4\u8bc1"),(0,_.jsxs)(U,{header:(0,_.jsx)(K,{strong:!0,children:"\u663e\u793a\u8bbe\u7f6e"}),children:[(0,_.jsx)(S.A.Item,{name:"color-scheme",label:"\u914d\u8272\u65b9\u6848",initialValue:"",children:(0,_.jsxs)(r.A,{onChange:null,children:[(0,_.jsx)(G,{value:"",children:"\u9ed8\u8ba4"}),(0,_.jsx)(G,{value:"gray-black",children:"\u9ed1\u5e95\u7070\u5b57"}),(0,_.jsx)(G,{value:"green-black",children:"\u9ed1\u5e95\u7eff\u5b57"}),(0,_.jsx)(G,{value:"white-black",children:"\u9ed1\u5e95\u767d\u5b57"}),(0,_.jsx)(G,{value:"black-white",children:"\u767d\u5e95\u9ed1\u5b57"})]})}),(0,_.jsx)(S.A.Item,{name:"font-name",label:"\u5b57\u4f53\u540d\u79f0",children:(0,_.jsx)(w.A,{type:"text",placeholder:"\u4e3a\u7a7a\u65f6\u4f7f\u7528\u7cfb\u7edf\u9ed8\u8ba4\u5b57\u4f53"})}),(0,_.jsx)(S.A.Item,{name:"font-size",label:"\u5b57\u4f53\u5927\u5c0f",children:(0,_.jsx)(w.A,{type:"number",placeholder:"\u4e3a\u7a7a\u65f6\u4f7f\u7528\u7cfb\u7edf\u9ed8\u8ba4\u5b57\u4f53\u5927\u5c0f",min:8,max:96})})]},"\u663e\u793a\u8bbe\u7f6e"),(0,_.jsxs)(U,{header:(0,_.jsx)(K,{strong:!0,children:"\u63a7\u5236\u7ec8\u7aef\u884c\u4e3a"}),children:[(0,_.jsx)(S.A.Item,{name:"backspace",label:"\u9000\u683c\u952e\u6620\u5c04",initialValue:"",children:(0,_.jsxs)(r.A,{onChange:null,children:[(0,_.jsx)(G,{value:"",children:"\u9ed8\u8ba4"}),(0,_.jsx)(G,{value:"127",children:"\u5220\u9664\u952e(Ctrl-?)"}),(0,_.jsx)(G,{value:"8",children:"\u9000\u683c\u952e(Ctrl-H)"})]})}),(0,_.jsx)(S.A.Item,{name:"terminal-type",label:"\u7ec8\u7aef\u7c7b\u578b",initialValue:"",children:(0,_.jsxs)(r.A,{onChange:null,children:[(0,_.jsx)(G,{value:"",children:"\u9ed8\u8ba4"}),(0,_.jsx)(G,{value:"ansi",children:"ansi"}),(0,_.jsx)(G,{value:"linux",children:"linux"}),(0,_.jsx)(G,{value:"vt100",children:"vt100"}),(0,_.jsx)(G,{value:"vt220",children:"vt220"}),(0,_.jsx)(G,{value:"xterm",children:"xterm"}),(0,_.jsx)(G,{value:"xterm-256color",children:"xterm-256color"})]})})]},"\u63a7\u5236\u7ec8\u7aef\u884c\u4e3a")]}):void 0]})});return(0,_.jsx)(m.A,{className:"asset-modal",title:i&&!1===d?"\u66f4\u65b0\u8d44\u4ea7":"\u65b0\u5efa\u8d44\u4ea7",visible:t,maskClosable:!1,destroyOnClose:!0,centered:!0,width:700,onOk:()=>{o.validateFields().then((async e=>{!0===d&&(e.id=void 0),console.log(e.tags,R.A.isEmpty(e.tags)),R.A.isEmpty(e.tags)?e.tags="":e.tags=e.tags.join(","),o.resetFields(),await s(e)}))},onCancel:()=>{o.resetFields(),l()},confirmLoading:n,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",children:(0,_.jsxs)(S.A,{form:o,...B,children:[(0,_.jsx)(S.A.Item,{name:"id",noStyle:!0,children:(0,_.jsx)(w.A,{hidden:!0})}),(0,_.jsx)(E.A,{defaultActiveKey:"basic",items:[{label:(0,_.jsxs)("span",{children:[(0,_.jsx)(L.A,{}),"\u57fa\u7840\u4fe1\u606f"]}),key:"basic",children:ae},{label:(0,_.jsxs)("span",{children:[(0,_.jsx)(V.A,{}),"\u9ad8\u7ea7\u914d\u7f6e"]}),key:"advanced",children:le}]})]})})};var H=s(27891),Y=s(41920),W=s(68201),J=s(50070),Q=s(38350),Z=s(4159),X=s.n(Z);const $=y.A,{Content:ee}=l.A,te=a.createRef();const se=(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("a",{onClick:function(){const e=new Blob(["\ufeffname,ssh,127.0.0.1,22,username,password,privateKey,passphrase,description,tag1|tag2|tag3"],{type:"text/csv;charset=gb2312;"});let t=document.createElement("a");t.download="sample.csv",t.href=URL.createObjectURL(e),t.click()},children:"\u4e0b\u8f7d\u793a\u4f8b"}),(0,_.jsx)("div",{children:"\u5bfc\u5165\u8d44\u4ea7\u65f6\uff0c\u8d26\u53f7\u3001\u5bc6\u7801\u548c\u5bc6\u94a5\u3001\u5bc6\u7801\u5c5e\u4e8e\u4e8c\u9009\u4e00\uff0c\u90fd\u586b\u5199\u65f6\u4f18\u5148\u9009\u62e9\u79c1\u94a5\u548c\u5bc6\u7801\u3002"})]}),ae=()=>{let[e,t]=(0,a.useState)(!1),[s,l]=(0,a.useState)(!1),[w,C]=(0,a.useState)(void 0),[f,S]=(0,a.useState)([]),[O,T]=(0,a.useState)([]),[N,E]=(0,a.useState)(!1),[F,P]=(0,a.useState)(void 0),[R,L]=(0,a.useState)(!1);const[V,D]=(0,H.j)(H.A.ASSET),G=(0,Y.useQuery)("getAllTag",b.A.getAll);let K=(0,j.Zp)();const U=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u540d\u79f0",dataIndex:"name",sorter:!0,render:(e,t)=>{"-"===t.description&&(t.description="");let s=(0,_.jsx)("div",{children:e});return(0,J.as)("asset-detail")&&(s=(0,_.jsx)(A.N_,{to:"/asset/".concat(t.id),children:e})),(0,_.jsxs)("div",{children:[s,(0,_.jsx)("div",{style:{color:"rgba(0, 0, 0, 0.45)",lineHeight:1.45,fontSize:"14px"},children:t.description})]})}},{title:"\u534f\u8bae",dataIndex:"protocol",key:"protocol",sorter:!0,render:(e,t)=>(0,_.jsx)(n.A,{color:I.K[e],children:e}),renderFormItem:(e,t,s)=>{let{type:a,defaultRender:l,...n}=t;return"form"===a?null:(0,_.jsxs)(r.A,{children:[(0,_.jsx)(r.A.Option,{value:"rdp",children:"RDP"}),(0,_.jsx)(r.A.Option,{value:"ssh",children:"SSH"}),(0,_.jsx)(r.A.Option,{value:"telnet",children:"Telnet"}),(0,_.jsx)(r.A.Option,{value:"kubernetes",children:"Kubernetes"})]})}},{title:"\u7f51\u7edc",dataIndex:"network",key:"network",sorter:!0,fieldProps:{placeholder:"\u793a\u4f8b: 127\u3001127.0.0.1\u3001:22\u3001127.0.0.1:22"},render:(e,t)=>"".concat(t.ip+":"+t.port)},{title:"\u6807\u7b7e",dataIndex:"tags",key:"tags",render:e=>{if(k.A.hasText(e))return e.split(",").filter((e=>"-"!==e)).map((e=>(0,_.jsx)(n.A,{children:e},e)))},renderFormItem:(e,t,s)=>{var a;let{type:l,defaultRender:n,...c}=t;return"form"===l?null:(0,_.jsx)(r.A,{mode:"multiple",allowClear:!0,children:null===(a=G.data)||void 0===a?void 0:a.map((e=>{if("-"!==e)return(0,_.jsx)(r.A.Option,{children:e},e)}))})}},{title:"\u72b6\u6001",dataIndex:"active",key:"active",sorter:!0,render:(e,t)=>!0===t.testing?(0,_.jsx)(c.A,{title:"\u6d4b\u8bd5\u4e2d",children:(0,_.jsx)(i.A,{status:"processing",text:"\u6d4b\u8bd5\u4e2d"})}):e?(0,_.jsx)(c.A,{title:"\u8fd0\u884c\u4e2d",children:(0,_.jsx)(i.A,{status:"success",text:"\u8fd0\u884c\u4e2d"})}):(0,_.jsx)(c.A,{title:t.activeMessage,children:(0,_.jsx)(i.A,{status:"error",text:"\u4e0d\u53ef\u7528"})}),renderFormItem:(e,t,s)=>{let{type:a,defaultRender:l,...n}=t;return"form"===a?null:(0,_.jsxs)(r.A,{children:[(0,_.jsx)(r.A.Option,{value:"true",children:"\u8fd0\u884c\u4e2d"}),(0,_.jsx)(r.A.Option,{value:"false",children:"\u4e0d\u53ef\u7528"})]})}},{title:"\u6240\u6709\u8005",dataIndex:"ownerName",key:"ownerName",hideInSearch:!0},{title:"\u521b\u5efa\u65f6\u95f4",key:"created",sorter:!0,dataIndex:"created",hideInSearch:!0},{title:"\u6700\u540e\u63a5\u5165\u65f6\u95f4",key:"lastAccessTime",sorter:!0,dataIndex:"lastAccessTime",hideInSearch:!0,render:(e,t)=>"0001-01-01 00:00:00"===e?"-":(0,_.jsx)(c.A,{title:e,children:X()(e).fromNow()})},{title:"\u64cd\u4f5c",valueType:"option",key:"option",render:(e,s,a,l)=>{const n=s.id,r=s.protocol,c=s.name;let i="";return i="ssh"===r?"#/term?assetId=".concat(n,"&assetName=").concat(c):"#/access?assetId=".concat(n,"&assetName=").concat(c,"&protocol=").concat(r),[(0,_.jsx)(W.A,{menu:"asset-access",children:(0,_.jsx)("a",{href:i,target:"_blank",children:"\u63a5\u5165"},"access")},"asset-access"),(0,_.jsx)(W.A,{menu:"asset-edit",children:(0,_.jsx)("a",{onClick:()=>{t(!0),C(s.id)},children:"\u7f16\u8f91"},"edit")},"asset-edit"),(0,_.jsx)(W.A,{menu:"asset-del",children:(0,_.jsx)(d.A,{title:"\u60a8\u786e\u8ba4\u8981\u5220\u9664\u6b64\u884c\u5417?",onConfirm:async()=>{await $.deleteById(s.id),te.current.reload()},okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",children:(0,_.jsx)("a",{className:"danger",children:"\u5220\u9664"},"delete")},"confirm-delete")},"asset-del"),(0,_.jsx)(g.A,{onSelect:e=>{switch(e){case"copy":E(!0),t(!0),C(s.id);break;case"test":q(s.id,a);break;case"change-owner":Z(s);break;case"asset-detail":K("/asset/".concat(s.id,"?activeKey=info"));break;case"asset-authorised-user":K("/asset/".concat(s.id,"?activeKey=bind-user"));break;case"asset-authorised-user-group":K("/asset/".concat(s.id,"?activeKey=bind-user-group"))}},menus:[{key:"copy",name:"\u590d\u5236",disabled:!(0,J.as)("asset-copy")},{key:"test",name:"\u8fde\u901a\u6027\u6d4b\u8bd5",disabled:!(0,J.as)("asset-conn-test")},{key:"change-owner",name:"\u66f4\u6362\u6240\u6709\u8005",disabled:!(0,J.as)("asset-change-owner")},{key:"asset-detail",name:"\u8be6\u60c5",disabled:!(0,J.as)("asset-detail")},{key:"asset-authorised-user",name:"\u6388\u6743\u7528\u6237",disabled:!(0,J.as)("asset-authorised-user")},{key:"asset-authorised-user-group",name:"\u6388\u6743\u7528\u6237\u7ec4",disabled:!(0,J.as)("asset-authorised-user-group")}]},"actionGroup")]}}],q=async(e,t)=>{f[t].testing=!0,S(f.slice());let[s,a]=await y.A.connTest(e);f[t].active=s,f[t].activeMessage=a,f[t].testing=!1,S(f.slice())},B=async()=>{for(let e=0;e<f.length;e++){let t=f[e];O.includes(t.id)&&q(t.id,e)}T([])},M=async e=>{let[t,s]=await $.importAsset(e);if(!1===t)return o.A.error({message:"\u5bfc\u5165\u8d44\u4ea7\u5931\u8d25",description:s}),!1;let a=s.successCount,l=s.errorCount;return 0===l?o.A.success({message:"\u5bfc\u5165\u8d44\u4ea7\u6210\u529f",description:"\u5171\u5bfc\u5165\u6210\u529f"+a+"\u6761\u8d44\u4ea7\u3002"}):o.A.info({message:"\u5bfc\u5165\u8d44\u4ea7\u5b8c\u6210",description:"\u5171\u5bfc\u5165\u6210\u529f".concat(a,"\u6761\u8d44\u4ea7\uff0c\u5931\u8d25").concat(l,"\u6761\u8d44\u4ea7\u3002")}),te.current.reload(),!1},Z=e=>{P(e),L(!0)};return(0,_.jsxs)(ee,{className:"page-container",children:[(0,_.jsx)(v.A,{columns:U,actionRef:te,columnsState:{value:V,onChange:D},request:async function(){var e;let t,s,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=arguments.length>1?arguments[1]:void 0,n="",r="";if(Object.keys(l).length>0&&(n=Object.keys(l)[0],"network"===n&&(n="ip"),r=Object.values(l)[0]),a.network){let e=a.network.split(":");e.length>=2?(t=e[0],s=e[1]):t=e[0]}let c={pageIndex:a.current,pageSize:a.pageSize,name:a.name,type:a.type,protocol:a.protocol,active:a.active,tags:null===(e=a.tags)||void 0===e?void 0:e.join(","),ip:t,port:s,field:n,order:r},i=await $.getPaging(c);return S(i.items),{data:f,success:!0,total:i.total}},rowSelection:{selections:[h.A.SELECTION_ALL,h.A.SELECTION_INVERT],selectedRowKeys:O,onChange:e=>{T(e)}},dataSource:f,rowKey:"id",search:{labelWidth:"auto"},pagination:{defaultPageSize:10,showSizeChanger:!0},dateFormatter:"string",headerTitle:"\u8d44\u4ea7\u5217\u8868",toolBarRender:()=>[(0,_.jsx)(W.A,{menu:"asset-add",children:(0,_.jsx)(u.A,{type:"primary",onClick:()=>{t(!0)},children:"\u65b0\u5efa"},"add")}),(0,_.jsx)(W.A,{menu:"asset-import",children:(0,_.jsx)(x.A,{content:se,children:(0,_.jsx)(p.A,{maxCount:1,beforeUpload:M,showUploadList:!1,children:(0,_.jsx)(u.A,{children:"\u5bfc\u5165"},"import")})})}),(0,_.jsx)(W.A,{menu:"asset-del",children:(0,_.jsx)(u.A,{danger:!0,type:"primary",disabled:0===O.length,onClick:()=>{m.A.confirm({title:"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u9009\u4e2d\u7684\u884c\u5417?",content:"\u5220\u9664\u4e4b\u540e\u65e0\u6cd5\u8fdb\u884c\u6062\u590d\uff0c\u8bf7\u614e\u91cd\u8003\u8651\u3002",okText:"\u786e\u5b9a",okType:"danger",cancelText:"\u53d6\u6d88",onOk:async()=>{await $.deleteById(O.join(",")),te.current.reload(),T([])}})},children:"\u5220\u9664"},"delete")}),(0,_.jsx)(W.A,{menu:"asset-conn-test",children:(0,_.jsx)(u.A,{type:"primary",disabled:0===O.length,onClick:B,children:"\u8fde\u901a\u6027\u6d4b\u8bd5"},"connTest")})]}),(0,_.jsx)(z,{id:w,copied:N,visible:e,confirmLoading:s,handleCancel:()=>{t(!1),C(void 0),E(!1)},handleOk:async e=>{l(!0);try{let s;s=e.id?await $.updateById(e.id,e):await $.create(e),s&&t(!1),te.current.reload()}finally{l(!1),C(void 0),E(!1)}}}),(0,_.jsx)(Q.A,{lastOwner:null===F||void 0===F?void 0:F.owner,open:R,handleOk:async e=>{await $.changeOwner(null===F||void 0===F?void 0:F.id,e)&&(L(!1),te.current.reload())},handleCancel:()=>{L(!1)}})]})}},38350:(e,t,s)=>{s.d(t,{A:()=>o});var a=s(9950),l=s(41920),n=s(16623),r=s(87427),c=s(90650),i=s(99674),d=s(44414);const o=e=>{var t;let{lastOwner:s,open:o,handleOk:h,handleCancel:u}=e,[x,p]=(0,a.useState)(!1),[m,j]=(0,a.useState)(s),A=(0,l.useQuery)("usersQuery",n.A.getAll,{enabled:o});return(0,d.jsx)("div",{children:(0,d.jsx)(r.A,{title:"\u66f4\u6362\u6240\u6709\u8005",confirmLoading:x,open:o,onOk:async()=>{p(!0),await h(m),p(!1)},onCancel:u,destroyOnClose:!0,children:(0,d.jsx)(c.A,{spinning:A.isLoading,children:(0,d.jsx)(i.A,{defaultValue:s,style:{width:"100%"},onChange:e=>{j(e)},children:null===(t=A.data)||void 0===t?void 0:t.map((e=>(0,d.jsx)(i.A.Option,{value:e.id,children:e.nickname},e.id)))})})})})}},68201:(e,t,s)=>{s.d(t,{A:()=>l});var a=s(50070);const l=e=>{let{menu:t,children:s}=e;if(Array.isArray(t)){if((0,a.as)(...t))return s}else if((0,a.as)(t))return s}},27891:(e,t,s)=>{s.d(t,{A:()=>r,j:()=>c});var a=s(98409),l=s(9950);let n=new class{constructor(){this.ASSET="cs-asset",this.CREDENTIAL="cs-credential",this.COMMAND="cs-command",this.ACCESS_GATEWAY="cs-access-gateway",this.ONLINE_SESSION="cs-online-session",this.OFFLINE_SESSION="cs-offline-session",this.LOGIN_LOG="cs-login-log",this.STORAGE_LOG="cs-storage-log",this.JOB="cs-job",this.STORAGE="cs-storage",this.LOGIN_POLICY="cs-login-policy",this.ACCESS_SECURITY="cs-access-security",this.USER="cs-user",this.ROLE="cs-role",this.USER_GROUP="cs-user-group",this.COMMAND_FILTER="cs-command-filter",this.STRATEGY="cs-strategy"}};const r=n,c=e=>{let[t,s]=(0,l.useState)(i(e));return[t,t=>{new Promise((e=>{s(t),e(t)})).then((t=>{d(e,t)}))}]},i=e=>{switch(e){case n.ASSET:case n.CREDENTIAL:case n.COMMAND:case n.ACCESS_GATEWAY:case n.ONLINE_SESSION:case n.OFFLINE_SESSION:}return o(e,{})},d=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},o=(e,t)=>{let s=localStorage.getItem(e);if(!a.A.hasText(s))return t;try{return JSON.parse(s)}catch(l){return t}}},52998:(e,t,s)=>{s.d(t,{A:()=>a});const a=new class{constructor(){this.isEmpty=function(e){return!e||0===e.length}}}},98409:(e,t,s)=>{s.d(t,{A:()=>a});const a=new class{constructor(){this.hasText=function(e){return!(void 0===e||null===e||0===e.length)},this.zeroPad=function(e,t){let s=e.toString();for(;s.length<t;)s="0"+s;return s}}}}}]);