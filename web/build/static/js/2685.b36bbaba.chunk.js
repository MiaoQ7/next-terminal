"use strict";(self.webpackChunknext_terminal=self.webpackChunknext_terminal||[]).push([[2685],{92685:(t,e,a)=>{a.r(e),a.d(e,{default:()=>g});a(9950);var i=a(80737),l=a(52735),d=a(66751),s=a(50973),r=a(2883),n=a(34999),o=a(4159),c=a.n(o),h=a(27646),u=a(31868),m=a(69627),x=a(41920),v=a(93766);const p=new class{constructor(){this.getData=async()=>{let t=await v.A.get("/overview/ps");if(1!==t.code)return{};let e=t.data,a=[];for(let l=0;l<e.netIO.length;l++){let t=e.netIO[l];a.push({time:t.time,read:t.read/1024/1024/1024,write:t.write/1024/1024/1024})}e.netIO=a;let i=[];for(let l=0;l<e.diskIO.length;l++){let t=e.diskIO[l];i.push({time:t.time,read:t.read/1024/1024/1024,write:t.write/1024/1024/1024})}return e.diskIO=i,e}}};var j=a(44414);const{Statistic:A}=r.A,F={loadStat:{load1:0,load5:0,load15:0,percent:0},mem:{total:0,available:0,usedPercent:0},cpu:{count:0,usedPercent:0,info:[{modelName:""}]},disk:{total:0,available:0,usedPercent:0},diskIO:[],netIO:[],cpuStat:[],memStat:[]},g=()=>{var t,e,a,o;let v=(0,x.useQuery)("getMonitorData",p.getData,{initialData:F,refetchInterval:5e3}),g=null===(t=v.data)||void 0===t?void 0:t.loadStat.percent,y="#5B8FF9";g>.9?y="#F4664A":g>.8?y="#001D70":g>.7&&(y="#0047A5");const f={height:100,width:100,shape:function(t,e,a,i){const l=a/4,d=t-a/2,s=e-i/2;return[["M",d,s+2*l],["A",l,l,0,0,1,t,s+l],["A",l,l,0,0,1,d+a,s+2*l],["L",t,s+i],["L",d,s+2*l],["Z"]]},percent:g,outline:{border:4,distance:4},wave:{length:64},theme:{styleSheet:{brandColor:y}},statistic:{title:!1,content:!1},pattern:{type:"square"}};let w=(null===(e=v.data)||void 0===e?void 0:e.cpu.usedPercent)/100,I="#5B8FF9";w>.9?I="#F4664A":w>.8&&(I="#001D70");const S={height:100,width:100,shape:"diamond",percent:w,outline:{border:4,distance:4},wave:{length:64},theme:{styleSheet:{brandColor:I}},pattern:{type:"line"},statistic:{title:!1,content:!1}};let b=(null===(a=v.data)||void 0===a?void 0:a.mem.usedPercent)/100,k="#5B8FF9";b>.75&&(k="#F4664A");const O={height:100,width:100,percent:b,outline:{border:4,distance:4},wave:{length:64},theme:{styleSheet:{brandColor:k}},statistic:{title:!1,content:!1},pattern:{type:"dot"}};let P=(null===(o=v.data)||void 0===o?void 0:o.disk.usedPercent)/100,D="#5B8FF9";P>.9?D="#F4664A":P>.8&&(D="#001D70");const B={height:100,width:100,shape:"rect",percent:P,outline:{border:4,distance:4},wave:{length:64},theme:{styleSheet:{brandColor:D}},pattern:{type:"line"},statistic:{title:!1,content:!1}},C={height:150,data:[v.data.diskIO,v.data.diskIO],xField:"time",yField:["read","write"],meta:{read:{alias:"\u8bfb\u53d6\uff08MB/s\uff09"},write:{alias:"\u5199\u5165\uff08MB/s\uff09"}},geometryOptions:[{geometry:"line",color:"#5B8FF9",smooth:!0},{geometry:"line",color:"#5AD8A6",smooth:!0}]},M={height:150,data:[v.data.netIO,v.data.netIO],xField:"time",yField:["read","write"],meta:{read:{alias:"\u63a5\u6536\uff08MB/s\uff09"},write:{alias:"\u53d1\u9001\uff08MB/s\uff09"}},geometryOptions:[{geometry:"line",color:"#5B8FF9",smooth:!0},{geometry:"line",color:"#5AD8A6",smooth:!0}]},q={height:150,data:v.data.cpuStat,xField:"time",yField:"value",smooth:!0,areaStyle:{fill:"#d6e3fd"}},N={height:150,data:v.data.memStat,xField:"time",yField:"value",smooth:!0,areaStyle:{fill:"#d6e3fd"}},z=v.data.cpu.info[0].modelName.length>10?v.data.cpu.info[0].modelName.substring(0,10)+"...":v.data.cpu.info[0].modelName;return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("div",{style:{margin:16},children:(0,j.jsxs)(n.A,{title:"\u7cfb\u7edf\u76d1\u63a7",extra:c()().format("YYYY[\u5e74]MM[\u6708]DD[\u65e5]")+" "+(0,m.N)(c()().day()),split:"horizontal",headerBordered:!0,bordered:!0,children:[(0,j.jsxs)(n.A,{split:"vertical",children:[(0,j.jsxs)(n.A,{children:[(0,j.jsx)(r.A,{statistic:{title:"\u8d1f\u8f7d",value:(L=v.data.loadStat.percent,L>=.9?"\u5835\u585e":L>=.8?"\u7f13\u6162":L>=.7?"\u6b63\u5e38":"\u6d41\u7545"),description:(0,j.jsxs)(i.A,{direction:"vertical",size:1,children:[(0,j.jsx)(A,{title:"Load1",value:v.data.loadStat.load1.toFixed(2)}),(0,j.jsx)(A,{title:"Load5",value:v.data.loadStat.load5.toFixed(2)}),(0,j.jsx)(A,{title:"Load15",value:v.data.loadStat.load15.toFixed(2)})]})},chart:(0,j.jsx)(d.A,{...f}),chartPlacement:"left"}),(0,j.jsx)(r.A,{statistic:{title:"CPU",value:v.data.cpu.count,suffix:"\u4e2a",description:(0,j.jsxs)(i.A,{direction:"vertical",size:1,children:[(0,j.jsx)(A,{title:"\u5229\u7528\u7387",value:v.data.cpu.usedPercent.toFixed(2)+"%"}),(0,j.jsx)(A,{title:"\u7269\u7406\u6838\u6570",value:v.data.cpu.phyCount+" \u4e2a"}),(0,j.jsx)(l.A,{title:v.data.cpu.info[0].modelName,children:(0,j.jsx)(A,{title:"\u578b\u53f7",value:z})})]})},chart:(0,j.jsx)(d.A,{...S}),chartPlacement:"left"})]}),(0,j.jsxs)(n.A,{children:[(0,j.jsx)(r.A,{statistic:{title:"\u5185\u5b58",value:(0,h.qI)(v.data.mem.total),description:(0,j.jsxs)(i.A,{direction:"vertical",size:1,children:[(0,j.jsx)(A,{title:"\u5229\u7528\u7387",value:v.data.mem.usedPercent.toFixed(2)+"%"}),(0,j.jsx)(A,{title:"\u53ef\u7528\u7684",value:(0,h.qI)(v.data.mem.available)}),(0,j.jsx)(A,{title:"\u5df2\u4f7f\u7528",value:(0,h.qI)(v.data.mem.used)})]})},chart:(0,j.jsx)(d.A,{...O}),chartPlacement:"left"}),(0,j.jsx)(r.A,{statistic:{title:"\u786c\u76d8",value:(0,h.qI)(v.data.disk.total),description:(0,j.jsxs)(i.A,{direction:"vertical",size:1,children:[(0,j.jsx)(A,{title:"\u5229\u7528\u7387",value:v.data.disk.usedPercent.toFixed(2)+"%"}),(0,j.jsx)(A,{title:"\u5269\u4f59\u7684",value:(0,h.qI)(v.data.disk.available)}),(0,j.jsx)(A,{title:"\u5df2\u4f7f\u7528",value:(0,h.qI)(v.data.disk.used)})]})},chart:(0,j.jsx)(d.A,{...B}),chartPlacement:"left"})]})]}),(0,j.jsxs)(n.A,{split:"vertical",children:[(0,j.jsx)(n.A,{title:"CPU\u8d1f\u8f7d",children:(0,j.jsx)(u.A,{...q})}),(0,j.jsx)(n.A,{title:"\u5185\u5b58\u8d1f\u8f7d",children:(0,j.jsx)(u.A,{...N})})]}),(0,j.jsxs)(n.A,{split:"vertical",children:[(0,j.jsx)(n.A,{title:"\u7f51\u7edc\u541e\u5410",children:(0,j.jsx)(s.A,{onlyChangeData:!0,...M})}),(0,j.jsx)(n.A,{title:"\u78c1\u76d8IO",children:(0,j.jsx)(s.A,{onlyChangeData:!0,...C})})]})]})})});var L}},69627:(t,e,a)=>{a.d(e,{N:()=>l});const i={1:"\u4e00",2:"\u4e8c",3:"\u4e09",4:"\u56db",5:"\u4e94",6:"\u516d",0:"\u65e5"},l=t=>"\u661f\u671f"+i[t]}}]);