"use strict";(self.webpackChunknext_terminal=self.webpackChunknext_terminal||[]).push([[4023],{16018:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(93766),a=r(21215),s=r.n(a);class i{constructor(e){this.group="",this.getById=async e=>{let t=await n.A.get("/".concat(this.group,"/").concat(e));if(1===t.code)return t.data},this.getPaging=async e=>{let t=s().stringify(e),r=await n.A.get("/".concat(this.group,"/paging?").concat(t));return 1!==r.code?{}:r.data},this.getAll=async()=>{let e=await n.A.get("/".concat(this.group));return 1!==e.code?[]:e.data},this.create=async e=>1===(await n.A.post("/".concat(this.group),e)).code,this.updateById=async(e,t)=>1===(await n.A.put("/".concat(this.group,"/").concat(e),t)).code,this.deleteById=async e=>1===(await n.A.delete("/".concat(this.group,"/").concat(e))).code,this.group=e}}},75602:(e,t,r)=>{r.d(t,{K:()=>n});const n={rdp:"cyan",ssh:"blue",telnet:"geekblue",vnc:"purple",kubernetes:"volcano"}},54023:(e,t,r)=>{r.r(t),r.d(t,{default:()=>m});var n=r(9950),a=r(12916),s=r(99674),i=r(52735),c=r(74947),o=r(27666),l=r(75602),d=r(98409),u=r(41920),h=r(16018),p=r(93766);class g extends h.A{constructor(){super("worker/assets"),this.tags=async()=>{let e=await p.A.get("/".concat(this.group,"/tags"));return 1!==e.code?[]:e.data}}}const x=new g;var A=r(4159),v=r.n(A),y=r(44414);const j=n.createRef(),m=()=>{const e=(0,u.useQuery)("getAllTag",x.tags),t=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u540d\u79f0",dataIndex:"name",sorter:!0,render:(e,t)=>("-"===t.description&&(t.description=""),(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{children:e}),(0,y.jsx)("div",{style:{color:"rgba(0, 0, 0, 0.45)",lineHeight:1.45,fontSize:"14px"},children:t.description})]}))},{title:"\u534f\u8bae",dataIndex:"protocol",key:"protocol",sorter:!0,render:(e,t)=>(0,y.jsx)(a.A,{color:l.K[e],children:e}),renderFormItem:(e,t,r)=>{let{type:n,defaultRender:a,...i}=t;return"form"===n?null:(0,y.jsxs)(s.A,{children:[(0,y.jsx)(s.A.Option,{value:"rdp",children:"RDP"}),(0,y.jsx)(s.A.Option,{value:"ssh",children:"SSH"}),(0,y.jsx)(s.A.Option,{value:"telnet",children:"Telnet"}),(0,y.jsx)(s.A.Option,{value:"kubernetes",children:"Kubernetes"})]})}},{title:"\u6807\u7b7e",dataIndex:"tags",key:"tags",render:e=>{if(d.A.hasText(e))return e.split(",").filter((e=>"-"!==e)).map((e=>(0,y.jsx)(a.A,{children:e},e)))},renderFormItem:(t,r,n)=>{var a;let{type:i,defaultRender:c,...o}=r;return"form"===i?null:(0,y.jsx)(s.A,{mode:"multiple",allowClear:!0,children:null===(a=e.data)||void 0===a?void 0:a.map((e=>{if("-"!==e)return(0,y.jsx)(s.A.Option,{children:e},e)}))})}},{title:"\u72b6\u6001",dataIndex:"active",key:"active",sorter:!0,render:(e,t)=>!0===t.testing?(0,y.jsx)(i.A,{title:"\u6d4b\u8bd5\u4e2d",children:(0,y.jsx)(c.A,{status:"processing",text:"\u6d4b\u8bd5\u4e2d"})}):e?(0,y.jsx)(i.A,{title:"\u8fd0\u884c\u4e2d",children:(0,y.jsx)(c.A,{status:"success",text:"\u8fd0\u884c\u4e2d"})}):(0,y.jsx)(i.A,{title:t.activeMessage,children:(0,y.jsx)(c.A,{status:"error",text:"\u4e0d\u53ef\u7528"})}),renderFormItem:(e,t,r)=>{let{type:n,defaultRender:a,...i}=t;return"form"===n?null:(0,y.jsxs)(s.A,{children:[(0,y.jsx)(s.A.Option,{value:"true",children:"\u8fd0\u884c\u4e2d"}),(0,y.jsx)(s.A.Option,{value:"false",children:"\u4e0d\u53ef\u7528"})]})}},{title:"\u6700\u540e\u63a5\u5165\u65f6\u95f4",key:"lastAccessTime",sorter:!0,dataIndex:"lastAccessTime",hideInSearch:!0,render:(e,t)=>"0001-01-01 00:00:00"===e?"-":(0,y.jsx)(i.A,{title:e,children:v()(e).fromNow()})},{title:"\u64cd\u4f5c",valueType:"option",key:"option",render:(e,t,r,n)=>{const a=t.id,s=t.protocol,i=t.name;let c="";return c="ssh"===s?"#/term?assetId=".concat(a,"&assetName=").concat(i,"&isWorker=true"):"#/access?assetId=".concat(a,"&assetName=").concat(i,"&protocol=").concat(s),[(0,y.jsx)("a",{href:c,rel:"noreferrer",target:"_blank",children:"\u63a5\u5165"},"access")]}}];return(0,y.jsx)("div",{children:(0,y.jsx)(o.A,{columns:t,actionRef:j,request:async function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,n="",a="";Object.keys(r).length>0&&(n=Object.keys(r)[0],a=Object.values(r)[0]);let s={pageIndex:t.current,pageSize:t.pageSize,name:t.name,type:t.type,protocol:t.protocol,active:t.active,tags:null===(e=t.tags)||void 0===e?void 0:e.join(","),field:n,order:a},i=await x.getPaging(s);return{data:i.items,success:!0,total:i.total}},rowKey:"id",search:{labelWidth:"auto"},pagination:{pageSize:10},dateFormatter:"string",headerTitle:"\u8d44\u4ea7\u5217\u8868"})})}},98409:(e,t,r)=>{r.d(t,{A:()=>n});const n=new class{constructor(){this.hasText=function(e){return!(void 0===e||null===e||0===e.length)},this.zeroPad=function(e,t){let r=e.toString();for(;r.length<t;)r="0"+r;return r}}}}}]);