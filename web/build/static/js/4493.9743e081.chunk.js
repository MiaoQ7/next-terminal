"use strict";(self.webpackChunknext_terminal=self.webpackChunknext_terminal||[]).push([[4493],{16018:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(93766),s=n(21215),c=n.n(s);class r{constructor(e){this.group="",this.getById=async e=>{let t=await a.A.get("/".concat(this.group,"/").concat(e));if(1===t.code)return t.data},this.getPaging=async e=>{let t=c().stringify(e),n=await a.A.get("/".concat(this.group,"/paging?").concat(t));return 1!==n.code?{}:n.data},this.getAll=async()=>{let e=await a.A.get("/".concat(this.group));return 1!==e.code?[]:e.data},this.create=async e=>1===(await a.A.post("/".concat(this.group),e)).code,this.updateById=async(e,t)=>1===(await a.A.put("/".concat(this.group,"/").concat(e),t)).code,this.deleteById=async e=>1===(await a.A.delete("/".concat(this.group,"/").concat(e))).code,this.group=e}}},34493:(e,t,n)=>{n.r(t),n.d(t,{default:()=>T});var a=n(9950),s=n(68832),c=n(12916),r=n(52735),i=n(56231),o=n(84703),l=n(48538),d=n(87427),h=n(27646),g=n(27666),u=n(16018),A=n(93766);class y extends u.A{constructor(){super("login-logs"),this.Clear=async()=>1===(await A.A.post("/".concat(this.group,"/clear"))).code}}const S=new y;var I=n(27891),p=n(68201),m=n(44414);const x=S,{Content:E}=s.A,O=a.createRef(),T=()=>{let[e,t]=(0,a.useState)(0),[n,s]=(0,a.useState)([]);const[u,A]=(0,I.j)(I.A.LOGIN_LOG),y=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u767b\u5f55\u8d26\u53f7",dataIndex:"username",key:"username"},{title:"\u767b\u5f55IP",dataIndex:"clientIp",key:"clientIp"},{title:"\u767b\u5f55\u72b6\u6001",dataIndex:"state",key:"state",hideInSearch:!0,render:e=>"0"===e?(0,m.jsx)(c.A,{color:"error",children:"\u5931\u8d25"}):(0,m.jsx)(c.A,{color:"success",children:"\u6210\u529f"})},{title:"\u5931\u8d25\u539f\u56e0",dataIndex:"reason",key:"reason",hideInSearch:!0},{title:"\u6d4f\u89c8\u5668",dataIndex:"clientUserAgent",key:"clientUserAgent",hideInSearch:!0,render:(e,t)=>(0,h.Im)(e)?"\u672a\u77e5":(0,m.jsx)(r.A,{placement:"topLeft",title:e,children:e.split(" ")[0]})},{title:"\u767b\u5f55\u65f6\u95f4",dataIndex:"loginTime",key:"loginTime",hideInSearch:!0,render:(e,t)=>(0,h.Yq)(e,"yyyy-MM-dd hh:mm:ss")},{title:"\u6ce8\u9500\u65f6\u95f4",dataIndex:"logoutTime",key:"logoutTime",hideInSearch:!0,render:(e,t)=>(0,h.Im)(e)||"0001-01-01 00:00:00"===e?"":e},{title:"\u64cd\u4f5c",valueType:"option",key:"option",render:(e,t,n,a)=>[(0,m.jsx)(p.A,{menu:"login-log-del",children:(0,m.jsx)(i.A,{title:"\u60a8\u786e\u8ba4\u8981\u5220\u9664\u6b64\u884c\u5417?",onConfirm:async()=>{await x.deleteById(t.id),O.current.reload()},okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",children:(0,m.jsx)("a",{className:"danger",children:"\u5220\u9664"},"delete")},"confirm-delete")},"login-log-del")]}];return(0,m.jsx)("div",{children:(0,m.jsx)(E,{className:"page-container",children:(0,m.jsx)(g.A,{columns:y,actionRef:O,columnsState:{value:u,onChange:A},rowSelection:{selections:[o.A.SELECTION_ALL,o.A.SELECTION_INVERT],selectedRowKeys:n,onChange:e=>{s(e)}},request:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,a="",s="";Object.keys(n).length>0&&(a=Object.keys(n)[0],s=Object.values(n)[0]);let c={pageIndex:e.current,pageSize:e.pageSize,username:e.username,clientIp:e.clientIp,field:a,order:s},r=await x.getPaging(c);return t(r.total),{data:r.items,success:!0,total:r.total}},rowKey:"id",search:{labelWidth:"auto"},pagination:{pageSize:10},dateFormatter:"string",headerTitle:"\u767b\u5f55\u65e5\u5fd7\u5217\u8868",toolBarRender:()=>[(0,m.jsx)(p.A,{menu:"login-log-del",children:(0,m.jsx)(l.A,{danger:!0,disabled:0===n.length,onClick:async()=>{d.A.confirm({title:"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u9009\u4e2d\u7684\u767b\u5f55\u65e5\u5fd7\u5417?",content:"\u5220\u9664\u4e4b\u540e\u65e0\u6cd5\u8fdb\u884c\u6062\u590d\uff0c\u8bf7\u614e\u91cd\u8003\u8651\u3002",okText:"\u786e\u5b9a",okType:"danger",cancelText:"\u53d6\u6d88",onOk:async()=>{await x.deleteById(n.join(",")),O.current.reload(),s([])}})},children:"\u5220\u9664"},"delete")}),(0,m.jsx)(p.A,{menu:"login-log-clear",children:(0,m.jsx)(l.A,{type:"primary",danger:!0,disabled:0===e,onClick:async()=>{d.A.confirm({title:"\u60a8\u786e\u5b9a\u8981\u6e05\u7a7a\u5168\u90e8\u7684\u6587\u4ef6\u767b\u5f55\u65e5\u5fd7\u5417?",content:"\u6e05\u7a7a\u4e4b\u540e\u65e0\u6cd5\u8fdb\u884c\u6062\u590d\uff0c\u8bf7\u614e\u91cd\u8003\u8651\u3002",okText:"\u786e\u5b9a",okType:"danger",cancelText:"\u53d6\u6d88",onOk:async()=>{await x.Clear(),O.current.reload()}})},children:"\u6e05\u7a7a"},"clear")})]})})})}},68201:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(50070);const s=e=>{let{menu:t,children:n}=e;if(Array.isArray(t)){if((0,a.as)(...t))return n}else if((0,a.as)(t))return n}},27891:(e,t,n)=>{n.d(t,{A:()=>r,j:()=>i});var a=n(98409),s=n(9950);let c=new class{constructor(){this.ASSET="cs-asset",this.CREDENTIAL="cs-credential",this.COMMAND="cs-command",this.ACCESS_GATEWAY="cs-access-gateway",this.ONLINE_SESSION="cs-online-session",this.OFFLINE_SESSION="cs-offline-session",this.LOGIN_LOG="cs-login-log",this.STORAGE_LOG="cs-storage-log",this.JOB="cs-job",this.STORAGE="cs-storage",this.LOGIN_POLICY="cs-login-policy",this.ACCESS_SECURITY="cs-access-security",this.USER="cs-user",this.ROLE="cs-role",this.USER_GROUP="cs-user-group",this.COMMAND_FILTER="cs-command-filter",this.STRATEGY="cs-strategy"}};const r=c,i=e=>{let[t,n]=(0,s.useState)(o(e));return[t,t=>{new Promise((e=>{n(t),e(t)})).then((t=>{l(e,t)}))}]},o=e=>{switch(e){case c.ASSET:case c.CREDENTIAL:case c.COMMAND:case c.ACCESS_GATEWAY:case c.ONLINE_SESSION:case c.OFFLINE_SESSION:}return d(e,{})},l=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},d=(e,t)=>{let n=localStorage.getItem(e);if(!a.A.hasText(n))return t;try{return JSON.parse(n)}catch(s){return t}}},98409:(e,t,n)=>{n.d(t,{A:()=>a});const a=new class{constructor(){this.hasText=function(e){return!(void 0===e||null===e||0===e.length)},this.zeroPad=function(e,t){let n=e.toString();for(;n.length<t;)n="0"+n;return n}}}}}]);