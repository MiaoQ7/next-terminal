"use strict";(self.webpackChunknext_terminal=self.webpackChunknext_terminal||[]).push([[5727],{15727:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var i=n(9950),s=n(42074),l=n(82548),o=n.n(l),a=n(39608),c=n(27646),r=n(21215),d=n.n(r),g=n(18202),u=n(44414);const h=()=>{const[e,t]=(0,s.ok)(),n=e.get("sessionId");let[l,r]=(0,i.useState)("");const h=e=>{let t=e.getDisplay().getWidth(),n=e.getDisplay().getHeight(),i=window.innerWidth/t,s=window.innerHeight/n;console.log(i,s);let l=Math.min(i,s);l&&e.getDisplay().scale(l)},p=e=>{if(console.log("onTunnelStateChange",e),e===o().Tunnel.State.CLOSED){document.getElementById("display").innerHTML="",r("\u4f1a\u8bdd\u5df2\u5173\u95ed")}},y=e=>{let t=new(o().WebSocketTunnel)("".concat(a.IV,"/sessions/").concat(e,"/tunnel-monitor"));t.onstatechange=p;let n=new(o().Client)(t);n.onstatechange=e=>{((e,t)=>{switch(e){case 0:r("\u6b63\u5728\u521d\u59cb\u5316\u4e2d...");break;case 1:r("\u6b63\u5728\u52aa\u529b\u8fde\u63a5\u4e2d...");break;case 2:r("\u6b63\u5728\u7b49\u5f85\u670d\u52a1\u5668\u54cd\u5e94...");break;case 3:r(""),h(t);break;case 4:r("\u4f1a\u8bdd\u5173\u95ed\u4e2d...");break;case 5:r("\u4f1a\u8bdd\u5df2\u5173\u95ed")}})(e,n)};const i=document.getElementById("display");i.innerHTML="";const s=n.getDisplay().getElement();i.appendChild(s);let l={"X-Auth-Token":(0,c.gf)()},g=d().stringify(l);return n.connect(g),n};return(0,i.useEffect)((()=>{let e=y(n),t=(0,g.s)((()=>{h(e)}));return e.getDisplay().onresize=t,window.addEventListener("resize",t),()=>{e&&(e.disconnect(),e.getDisplay().getElement().innerHTML=""),window.removeEventListener("resize",t)}}),[n]),(0,u.jsxs)("div",{style:{width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#1b1b1b"},children:[(0,u.jsx)("div",{id:"tip",style:{color:"white",fontWeight:"bold"},children:l}),(0,u.jsx)("div",{id:"display"})]})}},18202:(e,t,n)=>{n.d(t,{s:()=>i});const i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=null;return function(){n&&clearTimeout(n),n=setTimeout((()=>{e.apply(this,arguments),n=null}),t)}}}}]);