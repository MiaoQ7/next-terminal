"use strict";(self.webpackChunknext_terminal=self.webpackChunknext_terminal||[]).push([[6179],{52082:(e,t,n)=>{var i;n.d(t,{A:()=>o});const o=(i=class e{constructor(e,t){this.type=e,this.content=t}toString(){return this.type+this.content}static parse(t){let n=parseInt(t.substring(0,1)),i=t.substring(1,t.length);return new e(n,i)}},i.Closed=0,i.Connected=1,i.Data=2,i.Resize=3,i.Ping=4,i)},12709:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var i=n(9950),o=n(9437),s=n(88257),r=n(27646),a=n(18202),c=n(21215),d=n.n(c),l=n(39608),h=n(52082),u=n(42074),w=(n(89879),n(44414));const g=()=>{const[e]=(0,u.ok)(),t=e.get("sessionId"),[n,c]=(0,i.useState)({width:window.innerWidth,height:window.innerHeight});return(0,i.useEffect)((()=>{let[e,n]=(e=>{const t=new o.Terminal({fontFamily:'monaco, Consolas, "Lucida Console", monospace',fontSize:14,theme:{background:"#1b1b1b"}});t.open(document.getElementById("terminal"));const n=new s.FitAddon;t.loadAddon(n),n.fit(),t.focus(),t.writeln("\u7b49\u5f85\u7528\u6237\u8f93\u5165\u4e2d..."),t.onData((e=>{}));let i={"X-Auth-Token":(0,r.gf)()},a=d().stringify(i),c=!0,u=new WebSocket("".concat(l.IV,"/sessions/").concat(e,"/ssh-monitor?").concat(a));return u.onmessage=e=>{let n=h.A.parse(e.data);switch(n.type){case h.A.Connected:t.clear();break;case h.A.Data:!0===c&&(c=!1,t.clear()),t.write(n.content);break;case h.A.Closed:t.writeln("\x1b[1;3;31m".concat(n.content,"\x1b[0m ")),u.close()}},[u,n]})(t),i=(0,a.s)((()=>{(e=>{e&&(c((()=>({width:window.innerWidth,height:window.innerHeight}))),e.fit())})(n)}));return window.addEventListener("resize",i),()=>{e&&e.close(),window.removeEventListener("resize",i)}}),[t]),(0,w.jsx)("div",{id:"terminal",style:{width:n.width,height:n.height,backgroundColor:"#1b1b1b"}})}},18202:(e,t,n)=>{n.d(t,{s:()=>i});const i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=null;return function(){n&&clearTimeout(n),n=setTimeout((()=>{e.apply(this,arguments),n=null}),t)}}}}]);