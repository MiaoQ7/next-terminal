"use strict";(self.webpackChunknext_terminal=self.webpackChunknext_terminal||[]).push([[624],{16018:(e,t,a)=>{a.d(t,{A:()=>i});var s=a(93766),n=a(21215),r=a.n(n);class i{constructor(e){this.group="",this.getById=async e=>{let t=await s.A.get("/".concat(this.group,"/").concat(e));if(1===t.code)return t.data},this.getPaging=async e=>{let t=r().stringify(e),a=await s.A.get("/".concat(this.group,"/paging?").concat(t));return 1!==a.code?{}:a.data},this.getAll=async()=>{let e=await s.A.get("/".concat(this.group));return 1!==e.code?[]:e.data},this.create=async e=>1===(await s.A.post("/".concat(this.group),e)).code,this.updateById=async(e,t)=>1===(await s.A.put("/".concat(this.group,"/").concat(e),t)).code,this.deleteById=async e=>1===(await s.A.delete("/".concat(this.group,"/").concat(e))).code,this.group=e}}},36381:(e,t,a)=>{a.d(t,{A:()=>i});var s=a(16018),n=a(93766);class r extends s.A{constructor(){super("credentials"),this.getAll=async()=>{let e=await n.A.get("/".concat(this.group));return 1!==e.code?[]:e.data}}}const i=new r},20624:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var s=a(9950),n=a(68832),r=a(12916),i=a(56231),c=a(48538),l=a(27666),d=a(36381),o=a(55902),h=a(87827),u=a(87427),A=a(99674),g=a(44414);const{TextArea:m}=o.A,p=d.A,x=[{text:"\u5bc6\u7801",value:"custom"},{text:"\u5bc6\u94a5",value:"private-key"}],y=e=>{let{visible:t,handleOk:a,handleCancel:n,confirmLoading:r,id:i}=e;const[c]=h.A.useForm();let[l,d]=(0,s.useState)("");return(0,s.useEffect)((()=>{t?i?(async()=>{let e=await p.getById(i);e&&(c.setFieldsValue(e),d(e.type))})():c.setFieldsValue({type:"custom"}):c.resetFields()}),[t]),(0,g.jsx)(u.A,{title:i?"\u66f4\u65b0\u6388\u6743\u51ed\u8bc1":"\u65b0\u5efa\u6388\u6743\u51ed\u8bc1",visible:t,maskClosable:!1,destroyOnClose:!0,onOk:()=>{c.validateFields().then((async e=>{await a(e)&&c.resetFields()}))},onCancel:()=>{c.resetFields(),n()},confirmLoading:r,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",children:(0,g.jsxs)(h.A,{form:c,labelCol:{span:6},wrapperCol:{span:14},children:[(0,g.jsx)(h.A.Item,{name:"id",noStyle:!0,children:(0,g.jsx)(o.A,{hidden:!0})}),(0,g.jsx)(h.A.Item,{label:"\u51ed\u8bc1\u540d\u79f0",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u51ed\u8bc1\u540d\u79f0"}],children:(0,g.jsx)(o.A,{placeholder:"\u8bf7\u8f93\u5165\u51ed\u8bc1\u540d\u79f0"})}),(0,g.jsx)(h.A.Item,{label:"\u8d26\u6237\u7c7b\u578b",name:"type",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u63a5\u8d26\u6237\u7c7b\u578b"}],children:(0,g.jsx)(A.A,{onChange:e=>{d(e)},children:x.map((e=>(0,g.jsx)(A.A.Option,{value:e.value,children:e.text},e.value)))})}),"private-key"===l?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(h.A.Item,{label:"\u6388\u6743\u8d26\u6237",name:"username",children:(0,g.jsx)(o.A,{placeholder:"\u8f93\u5165\u6388\u6743\u8d26\u6237"})}),(0,g.jsx)(h.A.Item,{label:"\u79c1\u94a5",name:"privateKey",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u79c1\u94a5"}],children:(0,g.jsx)(m,{rows:4})}),(0,g.jsx)(h.A.Item,{label:"\u79c1\u94a5\u5bc6\u7801",name:"passphrase",children:(0,g.jsx)(m,{rows:1})})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("input",{type:"password",hidden:!0,autoComplete:"new-password"}),(0,g.jsx)(h.A.Item,{label:"\u6388\u6743\u8d26\u6237",name:"username",children:(0,g.jsx)(o.A,{placeholder:"\u8f93\u5165\u6388\u6743\u8d26\u6237"})}),(0,g.jsx)(h.A.Item,{label:"\u6388\u6743\u5bc6\u7801",name:"password",children:(0,g.jsx)(o.A.Password,{placeholder:"\u8f93\u5165\u6388\u6743\u5bc6\u7801"})})]})]})})};var S=a(27891),I=a(68201);const{Content:j}=n.A,w=s.createRef(),O=d.A,f=()=>{let[e,t]=(0,s.useState)(!1),[a,n]=(0,s.useState)(!1),[d,o]=(0,s.useState)(void 0);const[h,u]=(0,S.j)(S.A.CREDENTIAL),A=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u540d\u79f0",dataIndex:"name"},{title:"\u51ed\u8bc1\u7c7b\u578b",dataIndex:"type",key:"type",hideInSearch:!0,render:(e,t)=>"private-key"===e?(0,g.jsx)(r.A,{color:"green",children:"\u5bc6\u94a5"}):(0,g.jsx)(r.A,{color:"red",children:"\u5bc6\u7801"})},{title:"\u6388\u6743\u8d26\u6237",dataIndex:"username",key:"username",hideInSearch:!0},{title:"\u6240\u6709\u8005",dataIndex:"ownerName",key:"ownerName",hideInSearch:!0},{title:"\u521b\u5efa\u65f6\u95f4",key:"created",dataIndex:"created",hideInSearch:!0},{title:"\u64cd\u4f5c",valueType:"option",key:"option",render:(e,a,s,n)=>[(0,g.jsx)(I.A,{menu:"credential-edit",children:(0,g.jsx)("a",{onClick:()=>{t(!0),o(a.id)},children:"\u7f16\u8f91"},"edit")},"credential-edit"),(0,g.jsx)(I.A,{menu:"credential-del",children:(0,g.jsx)(i.A,{title:"\u60a8\u786e\u8ba4\u8981\u5220\u9664\u6b64\u884c\u5417?",onConfirm:async()=>{await O.deleteById(a.id),w.current.reload()},okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",children:(0,g.jsx)("a",{className:"danger",children:"\u5220\u9664"},"delete")},"confirm-delete")},"credential-del")]}];return(0,g.jsxs)(j,{className:"page-container",children:[(0,g.jsx)(l.A,{columns:A,actionRef:w,columnsState:{value:h,onChange:u},request:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a="",s="";Object.keys(t).length>0&&(a=Object.keys(t)[0],s=Object.values(t)[0]);let n={pageIndex:e.current,pageSize:e.pageSize,name:e.name,field:a,order:s},r=await O.getPaging(n);return{data:r.items,success:!0,total:r.total}},rowKey:"id",search:{labelWidth:"auto"},pagination:{defaultPageSize:10},dateFormatter:"string",headerTitle:"\u6388\u6743\u51ed\u8bc1\u5217\u8868",toolBarRender:()=>[(0,g.jsx)(I.A,{menu:"credential-add",children:(0,g.jsx)(c.A,{type:"primary",onClick:()=>{t(!0)},children:"\u65b0\u5efa"},"button")})]}),(0,g.jsx)(y,{id:d,visible:e,confirmLoading:a,handleCancel:()=>{t(!1),o(void 0)},handleOk:async e=>{n(!0);try{let a;a=e.id?await O.updateById(e.id,e):await O.create(e),a&&t(!1),w.current.reload()}finally{n(!1)}}})]})}},68201:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(50070);const n=e=>{let{menu:t,children:a}=e;if(Array.isArray(t)){if((0,s.as)(...t))return a}else if((0,s.as)(t))return a}},27891:(e,t,a)=>{a.d(t,{A:()=>i,j:()=>c});var s=a(98409),n=a(9950);let r=new class{constructor(){this.ASSET="cs-asset",this.CREDENTIAL="cs-credential",this.COMMAND="cs-command",this.ACCESS_GATEWAY="cs-access-gateway",this.ONLINE_SESSION="cs-online-session",this.OFFLINE_SESSION="cs-offline-session",this.LOGIN_LOG="cs-login-log",this.STORAGE_LOG="cs-storage-log",this.JOB="cs-job",this.STORAGE="cs-storage",this.LOGIN_POLICY="cs-login-policy",this.ACCESS_SECURITY="cs-access-security",this.USER="cs-user",this.ROLE="cs-role",this.USER_GROUP="cs-user-group",this.COMMAND_FILTER="cs-command-filter",this.STRATEGY="cs-strategy"}};const i=r,c=e=>{let[t,a]=(0,n.useState)(l(e));return[t,t=>{new Promise((e=>{a(t),e(t)})).then((t=>{d(e,t)}))}]},l=e=>{switch(e){case r.ASSET:case r.CREDENTIAL:case r.COMMAND:case r.ACCESS_GATEWAY:case r.ONLINE_SESSION:case r.OFFLINE_SESSION:}return o(e,{})},d=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},o=(e,t)=>{let a=localStorage.getItem(e);if(!s.A.hasText(a))return t;try{return JSON.parse(a)}catch(n){return t}}},98409:(e,t,a)=>{a.d(t,{A:()=>s});const s=new class{constructor(){this.hasText=function(e){return!(void 0===e||null===e||0===e.length)},this.zeroPad=function(e,t){let a=e.toString();for(;a.length<t;)a="0"+a;return a}}}}}]);