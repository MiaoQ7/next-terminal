"use strict";(self.webpackChunknext_terminal=self.webpackChunknext_terminal||[]).push([[7985],{16018:(e,t,a)=>{a.d(t,{A:()=>r});var n=a(93766),s=a(21215),c=a.n(s);class r{constructor(e){this.group="",this.getById=async e=>{let t=await n.A.get("/".concat(this.group,"/").concat(e));if(1===t.code)return t.data},this.getPaging=async e=>{let t=c().stringify(e),a=await n.A.get("/".concat(this.group,"/paging?").concat(t));return 1!==a.code?{}:a.data},this.getAll=async()=>{let e=await n.A.get("/".concat(this.group));return 1!==e.code?[]:e.data},this.create=async e=>1===(await n.A.post("/".concat(this.group),e)).code,this.updateById=async(e,t)=>1===(await n.A.put("/".concat(this.group,"/").concat(e),t)).code,this.deleteById=async e=>1===(await n.A.delete("/".concat(this.group,"/").concat(e))).code,this.group=e}}},80398:(e,t,a)=>{a.d(t,{A:()=>r});var n=a(16018),s=a(93766);class c extends n.A{constructor(){var e;super("assets"),e=this,this.GetAll=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=await s.A.get("/".concat(e.group,"?protocol=").concat(t));return 1!==a.code?[]:a.data},this.connTest=async e=>{let t=await s.A.post("/".concat(this.group,"/").concat(e,"/tcping"));return 1!==t.code?[!1,t.message]:[t.data.active,t.data.message]},this.importAsset=async e=>{const t=new FormData;t.append("file",e);let a=await s.A.post("/".concat(this.group,"/import"),t,{"Content-Type":"multipart/form-data"});return 1!==a.code?[!1,a.message]:[!0,a.data]},this.changeOwner=async(e,t)=>1===(await s.A.post("/".concat(this.group,"/").concat(e,"/change-owner?owner=").concat(t))).code}}const r=new c},75602:(e,t,a)=>{a.d(t,{K:()=>n});const n={rdp:"cyan",ssh:"blue",telnet:"geekblue",vnc:"purple",kubernetes:"volcano"}},47985:(e,t,a)=>{a.r(t),a.d(t,{default:()=>k});var n=a(9950),s=a(50559),c=a(68832),r=a(52735),i=a(12916),o=a(74947),l=a(40895),d=a(84703),h=a(80737),p=a(27666),g=a(75602),u=a(80398),A=a(27646),x=a(4159),y=a.n(x),m=a(44414);const{Title:j}=s.A,{Content:w}=c.A,f=n.createRef(),k=()=>{let[e,t]=(0,n.useState)([]);const a=[{title:"\u8d44\u4ea7\u540d\u79f0",dataIndex:"name",key:"name",render:(e,t)=>{let a=e;return a&&a.length>20&&(a=a.substring(0,20)+" ..."),(0,m.jsx)(r.A,{placement:"topLeft",title:e,children:a})}},{title:"\u8fde\u63a5\u534f\u8bae",dataIndex:"protocol",key:"protocol",render:(e,t)=>{const a="".concat(t.ip+":"+t.port);return(0,m.jsx)(r.A,{title:a,children:(0,m.jsx)(i.A,{color:g.K[e],children:e})})}},{title:"\u6807\u7b7e",dataIndex:"tags",key:"tags",render:e=>{if(!(0,A.Im)(e)){let t=[],a=e.split(",");for(let n=0;n<a.length;n++)"-"!==e[n]&&t.push((0,m.jsx)(i.A,{children:a[n]}));return t}}},{title:"\u72b6\u6001",dataIndex:"active",key:"active",render:e=>e?(0,m.jsx)(r.A,{title:"\u8fd0\u884c\u4e2d",children:(0,m.jsx)(o.A,{status:"processing",text:"\u8fd0\u884c\u4e2d"})}):(0,m.jsx)(r.A,{title:"\u4e0d\u53ef\u7528",children:(0,m.jsx)(o.A,{status:"error",text:"\u4e0d\u53ef\u7528"})})},{title:"\u6240\u6709\u8005",dataIndex:"ownerName",key:"ownerName"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"created",key:"created",render:(e,t)=>(0,m.jsx)(r.A,{title:e,children:y()(e).fromNow()})}];return(0,m.jsxs)(w,{className:"page-container",children:[(0,m.jsxs)("div",{style:{paddingLeft:24,paddingRight:24},children:[(0,m.jsx)(j,{level:5,children:"\u5f85\u6267\u884c\u8d44\u4ea7\u5217\u8868"}),(0,m.jsx)("div",{children:e.map((a=>(0,m.jsx)(i.A,{color:g.K[a.protocol],closable:!0,onClose:()=>(a=>{let n=e.filter((e=>e.id!==a));t(n.slice())})(a.id),children:a.name},a.id)))}),(0,m.jsx)(l.A,{})]}),(0,m.jsx)(p.A,{columns:a,actionRef:f,rowSelection:{selections:[d.A.SELECTION_ALL,d.A.SELECTION_INVERT]},tableAlertRender:a=>{let{selectedRowKeys:n,selectedRows:s,onCleanSelected:c}=a;return(0,m.jsxs)(h.A,{size:24,children:[(0,m.jsxs)("span",{children:["\u5df2\u9009 ",n.length," \u9879"]}),(0,m.jsx)("span",{children:(0,m.jsx)("a",{onClick:()=>(a=>{a.forEach((t=>{!1===e.some((e=>e.id===t.id))&&e.push(t)})),t(e.slice())})(s),children:"\u52a0\u5165\u5f85\u6267\u884c\u5217\u8868"})}),(0,m.jsx)("span",{children:(0,m.jsx)("a",{onClick:()=>(a=>{a.forEach((t=>{e=e.filter((e=>e.id!==t.id))})),t(e.slice())})(s),children:"\u4ece\u5f85\u6267\u884c\u5217\u8868\u79fb\u9664"})})]})},request:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a="",n="";Object.keys(t).length>0&&(a=Object.keys(t)[0],n=Object.values(t)[0]);let s={pageIndex:e.current,pageSize:e.pageSize,name:e.name,protocol:"ssh",field:a,order:n},c=await u.A.getPaging(s);return{data:c.items,success:!0,total:c.total}},rowKey:"id",search:{labelWidth:"auto"},pagination:{pageSize:5},dateFormatter:"string",headerTitle:"\u8d44\u4ea7\u5217\u8868"})]})}}}]);