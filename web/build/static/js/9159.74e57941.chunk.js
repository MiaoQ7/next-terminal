"use strict";(self.webpackChunknext_terminal=self.webpackChunknext_terminal||[]).push([[9159],{16018:(e,t,s)=>{s.d(t,{A:()=>n});var a=s(93766),r=s(21215),i=s.n(r);class n{constructor(e){this.group="",this.getById=async e=>{let t=await a.A.get("/".concat(this.group,"/").concat(e));if(1===t.code)return t.data},this.getPaging=async e=>{let t=i().stringify(e),s=await a.A.get("/".concat(this.group,"/paging?").concat(t));return 1!==s.code?{}:s.data},this.getAll=async()=>{let e=await a.A.get("/".concat(this.group));return 1!==e.code?[]:e.data},this.create=async e=>1===(await a.A.post("/".concat(this.group),e)).code,this.updateById=async(e,t)=>1===(await a.A.put("/".concat(this.group,"/").concat(e),t)).code,this.deleteById=async e=>1===(await a.A.delete("/".concat(this.group,"/").concat(e))).code,this.group=e}}},59159:(e,t,s)=>{s.r(t),s.d(t,{default:()=>O});var a=s(9950),r=s(68832),i=s(12916),n=s(56231),c=s(48538),l=s(27666),o=s(87827),d=s(87427),u=s(55902),h=s(17811),g=s(6579),A=s(16018);class y extends A.A{constructor(){super("securities")}}const S=new y;var p=s(44414);const x={labelCol:{span:6},wrapperCol:{span:14}},m=e=>{let{visible:t,handleOk:s,handleCancel:r,confirmLoading:i,id:n}=e;const[c]=o.A.useForm();return(0,a.useEffect)((()=>{t&&n?(async()=>{let e=await S.getById(n);e&&c.setFieldsValue(e)})():c.setFieldsValue({priority:50})}),[t]),(0,p.jsx)(d.A,{title:n?"\u66f4\u65b0\u8bbf\u95ee\u89c4\u5219":"\u65b0\u5efa\u8bbf\u95ee\u89c4\u5219",visible:t,maskClosable:!1,destroyOnClose:!0,onOk:()=>{c.validateFields().then((async e=>{await s(e)&&c.resetFields()}))},onCancel:()=>{c.resetFields(),r()},confirmLoading:i,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",children:(0,p.jsxs)(o.A,{form:c,...x,children:[(0,p.jsx)(o.A.Item,{name:"id",noStyle:!0,children:(0,p.jsx)(u.A,{hidden:!0})}),(0,p.jsx)(o.A.Item,{label:"IP\u5730\u5740",name:"ip",rules:[{required:!0,message:"\u8bf7\u8f93\u5165IP\u5730\u5740"}],extra:"\u683c\u5f0f\u4e3a\u9017\u53f7\u5206\u9694\u7684\u5b57\u7b26\u4e32, 0.0.0.0/0 \u5339\u914d\u6240\u6709\u3002\u4f8b\u5982: 192.168.0.1, 192.168.1.0/24, 192.168.2.0-192.168.2.20",children:(0,p.jsx)(u.A,{autoComplete:"off",placeholder:"\u8bf7\u8f93\u5165"})}),(0,p.jsx)(o.A.Item,{label:"\u89c4\u5219",name:"rule",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u89c4\u5219"}],children:(0,p.jsxs)(h.Ay.Group,{onChange:async e=>{},children:[(0,p.jsx)(h.Ay,{value:"allow",children:"\u5141\u8bb8"}),(0,p.jsx)(h.Ay,{value:"reject",children:"\u62d2\u7edd"})]})}),(0,p.jsx)(o.A.Item,{label:"\u4f18\u5148\u7ea7",name:"priority",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f18\u5148\u7ea7"}],extra:"\u4f18\u5148\u7ea7\u53ef\u9009\u8303\u56f4\u4e3a 1-100 (\u6570\u503c\u8d8a\u5c0f\u8d8a\u4f18\u5148)",children:(0,p.jsx)(g.A,{min:1,max:100})})]})})};var I=s(27891),j=s(68201);const C=S,{Content:f}=r.A,E=a.createRef(),O=()=>{let[e,t]=(0,a.useState)(!1),[s,r]=(0,a.useState)(!1),[o,d]=(0,a.useState)(void 0);const[u,h]=(0,I.j)(I.A.ACCESS_SECURITY),g=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"IP",dataIndex:"ip",key:"ip",sorter:!0},{title:"\u89c4\u5219",dataIndex:"rule",key:"rule",hideInSearch:!0,render:e=>"allow"===e?(0,p.jsx)(i.A,{color:"green",children:"\u5141\u8bb8"}):(0,p.jsx)(i.A,{color:"red",children:"\u7981\u6b62"})},{title:"\u4f18\u5148\u7ea7",dataIndex:"priority",key:"priority",sorter:!0,hideInSearch:!0},{title:"\u6765\u6e90",dataIndex:"source",key:"source",hideInSearch:!0},{title:"\u64cd\u4f5c",valueType:"option",key:"option",render:(e,s,a,r)=>[(0,p.jsx)(j.A,{menu:"access-security-edit",children:(0,p.jsx)("a",{onClick:()=>{t(!0),d(s.id)},children:"\u7f16\u8f91"},"edit")},"access-security-edit"),(0,p.jsx)(j.A,{menu:"access-security-del",children:(0,p.jsx)(n.A,{title:"\u60a8\u786e\u8ba4\u8981\u5220\u9664\u6b64\u884c\u5417?",onConfirm:async()=>{await C.deleteById(s.id),E.current.reload()},okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",children:(0,p.jsx)("a",{className:"danger",children:"\u5220\u9664"},"delete")},"confirm-delete")},"access-security-del")]}];return(0,p.jsx)("div",{children:(0,p.jsxs)(f,{className:"page-container",children:[(0,p.jsx)(l.A,{columns:g,actionRef:E,columnsState:{value:u,onChange:h},request:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,s="",a="";Object.keys(t).length>0&&(s=Object.keys(t)[0],a=Object.values(t)[0]);let r={pageIndex:e.current,pageSize:e.pageSize,name:e.name,field:s,order:a},i=await C.getPaging(r);return{data:i.items,success:!0,total:i.total}},rowKey:"id",search:{labelWidth:"auto"},pagination:{pageSize:10},dateFormatter:"string",headerTitle:"\u8bbf\u95ee\u89c4\u5219\u5217\u8868",toolBarRender:()=>[(0,p.jsx)(j.A,{menu:"access-security-add",children:(0,p.jsx)(c.A,{type:"primary",onClick:()=>{t(!0)},children:"\u65b0\u5efa"},"button")})]}),(0,p.jsx)(m,{id:o,visible:e,confirmLoading:s,handleCancel:()=>{t(!1),d(void 0)},handleOk:async e=>{r(!0);try{let s;s=e.id?await C.updateById(e.id,e):await C.create(e),s&&t(!1),E.current.reload()}finally{r(!1)}}})]})})}},68201:(e,t,s)=>{s.d(t,{A:()=>r});var a=s(50070);const r=e=>{let{menu:t,children:s}=e;if(Array.isArray(t)){if((0,a.as)(...t))return s}else if((0,a.as)(t))return s}},27891:(e,t,s)=>{s.d(t,{A:()=>n,j:()=>c});var a=s(98409),r=s(9950);let i=new class{constructor(){this.ASSET="cs-asset",this.CREDENTIAL="cs-credential",this.COMMAND="cs-command",this.ACCESS_GATEWAY="cs-access-gateway",this.ONLINE_SESSION="cs-online-session",this.OFFLINE_SESSION="cs-offline-session",this.LOGIN_LOG="cs-login-log",this.STORAGE_LOG="cs-storage-log",this.JOB="cs-job",this.STORAGE="cs-storage",this.LOGIN_POLICY="cs-login-policy",this.ACCESS_SECURITY="cs-access-security",this.USER="cs-user",this.ROLE="cs-role",this.USER_GROUP="cs-user-group",this.COMMAND_FILTER="cs-command-filter",this.STRATEGY="cs-strategy"}};const n=i,c=e=>{let[t,s]=(0,r.useState)(l(e));return[t,t=>{new Promise((e=>{s(t),e(t)})).then((t=>{o(e,t)}))}]},l=e=>{switch(e){case i.ASSET:case i.CREDENTIAL:case i.COMMAND:case i.ACCESS_GATEWAY:case i.ONLINE_SESSION:case i.OFFLINE_SESSION:}return d(e,{})},o=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},d=(e,t)=>{let s=localStorage.getItem(e);if(!a.A.hasText(s))return t;try{return JSON.parse(s)}catch(r){return t}}},98409:(e,t,s)=>{s.d(t,{A:()=>a});const a=new class{constructor(){this.hasText=function(e){return!(void 0===e||null===e||0===e.length)},this.zeroPad=function(e,t){let s=e.toString();for(;s.length<t;)s="0"+s;return s}}}}}]);